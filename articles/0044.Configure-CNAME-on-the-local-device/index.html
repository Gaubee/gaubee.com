<!doctype html><html><head><meta charset="utf-8"><meta name="description" content=""><meta name="keywords" content="Appn, WebComponent, article, linux, dns"><meta name="author" content="Gaubee, gaubeebangeel@gmail.com"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=5"><title>在本机配置 CNAME</title><link rel="shortcut icon" href="/assets/favicon-wB3RD3gX.ico"><link rel="stylesheet" href="/index.css">  <link rel="stylesheet" crossorigin href="/assets/prism-okaidia-D95GE6Gn.css">
</head><body><header class="bg-ani"><style>.nav{padding:0 2em;border-radius:2em;backdrop-filter:contrast(0.5) brightness(2);width:fit-content;max-width:100%}.nav{display:grid;grid-template-columns:repeat(auto-fit,180px);justify-content:center;gap:12px}.nav>a{display:block;flex:1;font-size:18px;padding:16px;text-align:center}.nav>a{color:#e91e63}@supports (-webkit-background-clip:text){.nav>a{background:-webkit-linear-gradient(#e91e63,#673ab7);color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent}}</style><nav class="nav"><a class="" href="/">Home</a> <a class="target" href="/articles/">Articles</a> <a class="" href="/events/">Events</a> <a class="" href="/timeline/">Timeline</a> <a class="" href="/projects/">Projects</a></nav></header><div id="main-wrapper" class="article-wrapper"><main><h1>在本机配置 CNAME</h1><ol><li><p>安装 dnsmasq</p><pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> dnsmasq</code></pre></li><li><p>配置 dnsmasq</p><pre class="language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/dnsmasq.d/test.conf <span class="token comment"># 随便开一个文件</span></code></pre><blockquote><p>填入：</p></blockquote><pre class="language-ini"><code class="language-ini"><span class="token key attr-name">cname</span><span class="token punctuation">=</span><span class="token value attr-value">from.gaubee.com,to.gaubee.com</span></code></pre></li><li><p>修改本地 dns 配置：</p><pre class="language-bash"><code class="language-bash"><span class="token function">vi</span> /etc/resolv.conf
<span class="token comment"># 添加一行 nameserver 127.0.0.1</span></code></pre><blockquote><p>最终我自己本地这个文件是这样的</p></blockquote><pre class="language-ini"><code class="language-ini"><span class="token comment"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span>
<span class="token comment"># [network]</span>
<span class="token comment"># generateResolvConf = false</span>
nameserver 127.0.0.1
nameserver 172.19.208.1</code></pre></li><li><p>最后启动 dnsmasq 即可：</p><pre class="language-bash"><code class="language-bash">/etc/init.d/dnsmasq start</code></pre><blockquote><p>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序</p></blockquote><pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">lsof</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">-n</span> <span class="token operator">|</span> <span class="token function">grep</span> LISTEN</code></pre></li></ol></main></div><style>footer a{line-height:1}footer nav{display:flex;gap:1rem}</style><footer class="bg-ani"><nav><a target="_blank" href="https://github.com/gaubee/gaubee.com">Github</a> <a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/recordQuery">闽ICP备17026139号-1</a></nav></footer></body></html>