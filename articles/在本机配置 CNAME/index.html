<h1 id=%E5%9C%A8%E6%9C%AC%E6%9C%BA%E9%85%8D%E7%BD%AE-cname tabindex=-1><a class=header-anchor href=#%E5%9C%A8%E6%9C%AC%E6%9C%BA%E9%85%8D%E7%BD%AE-cname>在本机配置 CNAME</a></h1><ol><li><p>安装 dnsmasq<pre class=language-bash><code class=language-bash><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> dnsmasq</code></pre><li><p>配置 dnsmasq<pre class=language-bash><code class=language-bash><span class="token function">vi</span> /etc/dnsmasq.d/test.conf <span class="token comment"># 随便开一个文件</span></code></pre><blockquote><p>填入：</blockquote><pre class=language-ini><code class=language-ini><span class="token attr-name key">cname</span><span class="token punctuation">=</span><span class="token attr-value value">from.gaubee.com,to.gaubee.com</span></code></pre><li><p>修改本地 dns 配置：<pre class=language-bash><code class=language-bash><span class="token function">vi</span> /etc/resolv.conf<br><span class="token comment"># 添加一行 nameserver 127.0.0.1</span></code></pre><blockquote><p>最终我自己本地这个文件是这样的</blockquote><pre class=language-ini><code class=language-ini><span class="token comment"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span><br><span class="token comment"># [network]</span><br><span class="token comment"># generateResolvConf = false</span><br>nameserver 127.0.0.1<br>nameserver 172.19.208.1</code></pre><li><p>最后启动 dnsmasq 即可：<pre class=language-bash><code class=language-bash>/etc/init.d/dnsmasq start</code></pre><blockquote><p>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序</blockquote><pre class=language-bash><code class=language-bash><span class="token function">sudo</span> <span class="token function">lsof</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">-n</span> <span class="token operator">|</span> <span class="token function">grep</span> LISTEN</code></pre></ol>