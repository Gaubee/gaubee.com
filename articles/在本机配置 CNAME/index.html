<!doctype html><html lang=zh-CN><meta charset=utf-8><title>在本机配置 CNAME · Gaubee</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/css/main.css rel=stylesheet><link href=/webmanifest.json rel=manifest><meta content=#ec407a name=theme-color><link href=/articles.atom rel=alternate title="Gaubee's Articles Atom feed" type=application/atom+xml><link href=/events.atom rel=alternate title="Gaubee's Events Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><header id=header><h1><a href=/ >Gaubee</a></h1><a href=#navigation-toggle id=nav-toggle>显示导航 Show navigation</a><nav><ul><li><a href=/ >主页 Home</a><li class=current><a href=/articles>文章 Articles</a><li><a href=/events>小事件 Events</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>在本机配置 CNAME</h1><p class=meta>发布于 <time datetime=10/10/2022 itemprop=datePublished>10/10/2022</time> · 最后修改时间 <time datetime=10/10/2022 itemprop=dateModified>10/10/2022</time> · 标签： <a href=/blog/tags/linux class=tag>linux</a> <a href=/blog/tags/dns class=tag>dns</a></header><div itemprop=articleBody><ol><li><p>安装 dnsmasq<pre class=language-bash><code class=language-bash><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> dnsmasq</code></pre><li><p>配置 dnsmasq<pre class=language-bash><code class=language-bash><span class="token function">vi</span> /etc/dnsmasq.d/test.conf <span class="token comment"># 随便开一个文件</span></code></pre><blockquote><p>填入：</blockquote><pre class=language-ini><code class=language-ini><span class="token attr-name key">cname</span><span class="token punctuation">=</span><span class="token attr-value value">from.gaubee.com,to.gaubee.com</span></code></pre><li><p>修改本地 dns 配置：<pre class=language-bash><code class=language-bash><span class="token function">vi</span> /etc/resolv.conf
<span class="token comment"># 添加一行 nameserver 127.0.0.1</span></code></pre><blockquote><p>最终我自己本地这个文件是这样的</blockquote><pre class=language-ini><code class=language-ini><span class="token comment"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span>
<span class="token comment"># [network]</span>
<span class="token comment"># generateResolvConf = false</span>
nameserver 127.0.0.1
nameserver 172.19.208.1</code></pre><li><p>最后启动 dnsmasq 即可：<pre class=language-bash><code class=language-bash>/etc/init.d/dnsmasq start</code></pre><blockquote><p>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序</blockquote><pre class=language-bash><code class=language-bash><span class="token function">sudo</span> <span class="token function">lsof</span> <span class="token parameter variable">-i</span> <span class="token parameter variable">-P</span> <span class="token parameter variable">-n</span> <span class="token operator">|</span> <span class="token function">grep</span> LISTEN</code></pre></ol></div><footer></footer></article></main><footer id=footer><div><nav><a href=https://twitter.com/gaubeebangeel rel="me nofollow" target=_blank>Twitter</a> · <a href="https://github.com/gaubee/gaubee.com/tree/main/./src/articles/在本机配置 CNAME.md" rel=nofollow target=_blank>Edit this page on GitHub</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>除非有特别的说明, 该站点所有直接内容都使用许可证：<a href=https://creativecommons.org/licenses/by/4.0/deed.zh>署名 4.0 国际 (CC BY 4.0)</a></small><blockquote><small>本网站不收集任何访问者的行为与信息，不做任何商业运作，仅仅为个人使用</small> <small style=display:block><a href=https://beian.miit.gov.cn/#/Integrated/recordQuery>闽ICP备17026139号-1</a></small></blockquote></footer><script src=/js/dark-mode-toggle.mjs type=module></script><script src=/js/time-elements.mjs type=module></script><script src=/js/main.mjs type=module></script>