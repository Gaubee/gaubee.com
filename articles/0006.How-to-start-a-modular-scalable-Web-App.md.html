<!DOCTYPE html><html lang="zh-CN"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/png" href="/icon-192x192.png"><meta name="generator" content="Astro v5.13.9"><title>「转」如何开始一个模块化可扩展的Web App</title><meta name="description" content="GauBee's personal blog"><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/_astro/ClientRouter.astro_astro_type_script_index_0_lang.B3vRBseb.js"></script><link rel="stylesheet" href="/_astro/editor.ByX6VvEs.css"></head> <body class="bg-white text-zinc-900 transition-colors duration-300 dark:bg-zinc-900 dark:text-zinc-50">  <div class="flex max-w-7xl mx-auto"> <aside class="hidden lg:block sticky top-0 h-screen w-64 flex-shrink-0 py-8 pr-8"> <aside class="w-64 p-4 pr-8"><nav class="flex flex-col space-y-2"><a href="/" class="flex items-center gap-4 py-3 px-6 text-lg font-semibold no-underline text-zinc-900 dark:text-zinc-100 rounded-full transition-colors duration-200 ease-in-out hover:bg-gray-200 dark:hover:bg-zinc-800"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house" aria-hidden="true"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg><span>主页</span></a><a href="/events" class="flex items-center gap-4 py-3 px-6 text-lg font-semibold no-underline text-zinc-900 dark:text-zinc-100 rounded-full transition-colors duration-200 ease-in-out hover:bg-gray-200 dark:hover:bg-zinc-800"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-rss" aria-hidden="true"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg><span>时事快讯</span></a></nav></aside> </aside> <main class="flex-1 min-w-0"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();</script><script>(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t),11:t=>1/0*t},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="Zqc5u5" prefix="r13" component-url="/_astro/MobileNav.DnXM_NFf.js" component-export="default" renderer-url="/_astro/client.6DCnCeAt.js" props="{&quot;title&quot;:[0,&quot;「转」如何开始一个模块化可扩展的Web App&quot;]}" ssr client="load" opts="{&quot;name&quot;:&quot;MobileNav&quot;,&quot;value&quot;:true}" await-children><div id="mobile-topbar" class="sticky top-0 z-50 flex h-14 items-center justify-between border-b border-zinc-200 bg-white/80 px-4 backdrop-blur-sm dark:border-zinc-800 dark:bg-zinc-900/80 lg:hidden"><div class="w-6"></div><div class="absolute left-1/2 -translate-x-1/2 text-sm font-semibold text-zinc-700 dark:text-zinc-300">「转」如何开始一个模块化可扩展的Web App</div><button type="button" aria-label="Open menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu" aria-hidden="true"><path d="M4 5h16"></path><path d="M4 12h16"></path><path d="M4 19h16"></path></svg></button></div><template data-astro-template> <div class="space-y-4"> <astro-island uid="ZjuGiW" prefix="r7" component-url="/_astro/TableOfContentsCard.CsCJMAN2.js" component-export="default" renderer-url="/_astro/client.6DCnCeAt.js" props="{&quot;headings&quot;:[1,[[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;从选择一个好模板开始&quot;],&quot;text&quot;:[0,&quot;从选择一个好模板开始&quot;]}],[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;制定统一的编码规范&quot;],&quot;text&quot;:[0,&quot;制定统一的编码规范&quot;]}],[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;html篇&quot;],&quot;text&quot;:[0,&quot;HTML篇&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;使用条件注释区分ie浏览器&quot;],&quot;text&quot;:[0,&quot;使用条件注释区分IE浏览器&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;meta标签的书写顺序&quot;],&quot;text&quot;:[0,&quot;meta标签的书写顺序&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;设置移动设备显示窗口宽度&quot;],&quot;text&quot;:[0,&quot;设置移动设备显示窗口宽度&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;使用modernizr做浏览器差异检测&quot;],&quot;text&quot;:[0,&quot;使用Modernizr做浏览器差异检测&quot;]}],[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;css篇&quot;],&quot;text&quot;:[0,&quot;CSS篇&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;css重置及增强功能&quot;],&quot;text&quot;:[0,&quot;CSS重置及增强功能&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;使用less或sass生成css&quot;],&quot;text&quot;:[0,&quot;使用LESS或Sass生成CSS&quot;]}],[0,{&quot;depth&quot;:[0,2],&quot;slug&quot;:[0,&quot;javascript篇&quot;],&quot;text&quot;:[0,&quot;Javascript篇&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;使用requirejs按需加载&quot;],&quot;text&quot;:[0,&quot;使用requireJS按需加载&quot;]}],[0,{&quot;depth&quot;:[0,4],&quot;slug&quot;:[0,&quot;requirejs-加载jquery--jquery插件&quot;],&quot;text&quot;:[0,&quot;requireJS 加载jQuery + jQuery插件&quot;]}],[0,{&quot;depth&quot;:[0,4],&quot;slug&quot;:[0,&quot;requirejs加载第三方类库&quot;],&quot;text&quot;:[0,&quot;requireJS加载第三方类库&quot;]}],[0,{&quot;depth&quot;:[0,4],&quot;slug&quot;:[0,&quot;css文件的模块化处理&quot;],&quot;text&quot;:[0,&quot;CSS文件的模块化处理&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;数据源的加载与等待&quot;],&quot;text&quot;:[0,&quot;数据源的加载与等待&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;使用js模板引擎&quot;],&quot;text&quot;:[0,&quot;使用JS模板引擎&quot;]}],[0,{&quot;depth&quot;:[0,3],&quot;slug&quot;:[0,&quot;面向对象与模块化&quot;],&quot;text&quot;:[0,&quot;面向对象与模块化&quot;]}]]]}" ssr client="load" opts="{&quot;name&quot;:&quot;TableOfContentsCard&quot;,&quot;value&quot;:true}" await-children><div class="rounded-xl border bg-card text-card-foreground shadow"><div class="p-6 pt-0"><ul><li><a href="#从选择一个好模板开始">从选择一个好模板开始</a></li><li><a href="#制定统一的编码规范">制定统一的编码规范</a></li><li><a href="#html篇">HTML篇</a></li><li><a href="#使用条件注释区分ie浏览器">使用条件注释区分IE浏览器</a></li><li><a href="#meta标签的书写顺序">meta标签的书写顺序</a></li><li><a href="#设置移动设备显示窗口宽度">设置移动设备显示窗口宽度</a></li><li><a href="#使用modernizr做浏览器差异检测">使用Modernizr做浏览器差异检测</a></li><li><a href="#css篇">CSS篇</a></li><li><a href="#css重置及增强功能">CSS重置及增强功能</a></li><li><a href="#使用less或sass生成css">使用LESS或Sass生成CSS</a></li><li><a href="#javascript篇">Javascript篇</a></li><li><a href="#使用requirejs按需加载">使用requireJS按需加载</a></li><li><a href="#requirejs-加载jquery--jquery插件">requireJS 加载jQuery + jQuery插件</a></li><li><a href="#requirejs加载第三方类库">requireJS加载第三方类库</a></li><li><a href="#css文件的模块化处理">CSS文件的模块化处理</a></li><li><a href="#数据源的加载与等待">数据源的加载与等待</a></li><li><a href="#使用js模板引擎">使用JS模板引擎</a></li><li><a href="#面向对象与模块化">面向对象与模块化</a></li></ul></div></div><!--astro:end--></astro-island> <!-- <TagsCard client:load tags={allTags} />
          <ArchiveCard client:load postsByMonth={postsByMonth} /> --> </div> </template><!--astro:end--></astro-island> <div class="p-6">  <article class="prose dark:prose-invert max-w-none"> <p>原文地址：<a href="http://avnpc.com/pages/start-a-modular-extensible-webapp">http://avnpc.com/pages/start-a-modular-extensible-webapp</a>
作者：<a href="https://plus.google.com/104171418568283484752/posts">Allo Vince</a></p>
<p>虽然从没有认为自己是一个前端开发者，但不知不觉中也积累下了一些前端开发的经验。正巧之前碰到一道面试题，于是就顺便梳理了一下自己关于Web App的一些思路并整理为本文。</p>
<p>对于很多简单的网站或Web应用来说，引入jQuery以及一些插件，在当前页面内写入简单逻辑已经可以满足大部分需要。但是如果一旦多人开发，应用的复杂程度上升，就会有很多问题开始暴露出来：</p>
<ul>
<li>数据源一般都与页面分离，那么App启动一般都需要等待数据源读入。</li>
<li>UI交互复杂时，需要将逻辑通过面向对象抽象后才能更好的复用。</li>
<li>功能间一般都存在依赖关系，需要引入支持依赖关系的模块加载器。</li>
</ul>
<p>那么如何解决这些问题，就以一个简单的订餐App为例，从零开始一个<a href="http://avnpc.com/pages/start-a-modular-extensible-webapp">模块化可扩展Web App</a>。</p>
<p>这个简单的App基于HTML5 Boilerplate、requireJS、jQuery Mobile、Underscore.js，后端逻辑用<a href="http://www.jstorage.info/">jStorage</a>模拟实现。完成后的<a href="http://allovince.github.com/webapp-startup/">成品</a>在此。所有代码可以<a href="https://github.com/AlloVince/webapp-startup">在github查看</a>。下文将逐一介绍实现的思路与方法。</p>
<h2 id="从选择一个好模板开始">从选择一个好模板开始</h2>
<p>开始一个Web项目，HTML的书写总是重中之重，一个好的HTML能从根源上规避大量潜在问题，所以Web App应该全部应用一个标准化的高质量HTML模板，而不是将所有页面交由开发人员自由发挥。</p>
<p>这里推荐使用<a href="http://html5boilerplate.com/">HTML5 Boilerplate项目</a>作为App的默认模板以及文件路径规范，无论是网站或者富UI的App，都可以采用这个模板作为起步。</p>
<p>可以使用</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>git clone git://github.com/h5bp/html5-boilerplate.git</span></span></code></pre>
<p>或者直接下载<a href="https://github.com/h5bp/html5-boilerplate">HTML5 Boilerplate项目代码</a>。HTML5 Boilerplate的文件结构如下，</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── css</span></span>
<span class="line"><span>│   ├── main.css</span></span>
<span class="line"><span>│   └── normalize.css</span></span>
<span class="line"><span>├── doc</span></span>
<span class="line"><span>├── img</span></span>
<span class="line"><span>├── js</span></span>
<span class="line"><span>│   ├── main.js</span></span>
<span class="line"><span>│   ├── plugins.js</span></span>
<span class="line"><span>│   └── vendor</span></span>
<span class="line"><span>│       ├── jquery.min.js</span></span>
<span class="line"><span>│       └── modernizr.min.js</span></span>
<span class="line"><span>├── .htaccess</span></span>
<span class="line"><span>├── 404.html</span></span>
<span class="line"><span>├── index.html</span></span>
<span class="line"><span>├── humans.txt</span></span>
<span class="line"><span>├── robots.txt</span></span>
<span class="line"><span>├── crossdomain.xml</span></span>
<span class="line"><span>├── favicon.ico</span></span>
<span class="line"><span>└── [apple-touch-icons]</span></span></code></pre>
<p>从上向下看</p>
<ul>
<li><code>css</code> 用于存放css文件，并内置了<a href="https://github.com/necolas/normalize.css">Normalize.css</a>作为默认CSS重置手段（其实Normalize.css不能算是CSS reset）。</li>
<li><code>doc</code> 存放项目文档</li>
<li><code>img</code> 存放项目图片</li>
<li><code>js</code> 存放javascript文件，其中第三方类库推荐放在<code>vendor</code>下</li>
<li><code>.htaccess</code> 内置了很多对于静态文件在Apache下的优化策略，如果Web服务器不是Apache则可以参考<a href="https://github.com/h5bp/server-configs">其他Web服务器配置优化</a>。</li>
<li><code>404.html</code> 默认的404页面，</li>
<li><code>index.html</code> 项目模板</li>
<li><code>humans.txt</code> 相对于面向机器人的<code>robots.txt</code>，humans.txt更像是小幽默，这在里可以写关于项目/团队的介绍，或者放置一些彩蛋给那些喜欢对你的应用刨根问底的用户们。</li>
<li><code>robots.txt</code> 用于告诉搜索引擎蜘蛛爬行规则</li>
<li><code>crossdomain.xml</code> 用于配置<a href="http://www.adobe.com/devnet/articles/crossdomain_policy_file_spec.html">Flash的跨域策略</a></li>
<li><code>favicon.ico</code> <code>apple-touch-icon.png</code>等小图标。</li>
</ul>
<p>如果是一个主要面向移动设备，还有更具针对性的<a href="http://html5boilerplate.com/mobile/">Mobile Boilerplate</a>可供参考。</p>
<h2 id="制定统一的编码规范">制定统一的编码规范</h2>
<p>在正式开始编码之前，无论是多大规模的应用，多少人的团队，一定要有一个统一的规范，才能保证后续的开发不会乱套。</p>
<p>前端规范其实又要分为三部分：HTML、CSS、Javascript应该分别有自己的规范。HTML/CSS主要约定id/class的命名规则、属性的书写顺序。JavaScript可能需要细化到缩进、编码风格、面向对象写法等等。</p>
<p>最省事的方法当然还是参考已有的规范，比如<a href="http://google-styleguide.googlecode.com/svn/trunk/htmlcssguide.xml">Google的HTML/CSS风格指南</a>、<a href="http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml">Google的Javascript编码指南</a>等等。</p>
<h2 id="html篇">HTML篇</h2>
<p>HTML5 Boilerplate的模板核心部分不过30行，但是每一行都可谓千锤百炼，可以用最小的消耗解决一些前端的顽固问题：</p>
<h3 id="使用条件注释区分ie浏览器">使用条件注释区分IE浏览器</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;!</span><span style="color:#85E89D">DOCTYPE</span><span style="color:#B392F0"> html</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--[if lt IE 7]>      &#x3C;html class="no-js lt-ie9 lt-ie8 lt-ie7"> &#x3C;![endif]--></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--[if IE 7]>         &#x3C;html class="no-js lt-ie9 lt-ie8"> &#x3C;![endif]--></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--[if IE 8]>         &#x3C;html class="no-js lt-ie9"> &#x3C;![endif]--></span></span>
<span class="line"><span style="color:#6A737D">&#x3C;!--[if gt IE 8]>&#x3C;!--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">html</span><span style="color:#B392F0"> class</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"no-js"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#6A737D">  &#x3C;!--&#x3C;![endif]--></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">html</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>之所以要这样写</p>
<ul>
<li>可以使用class作为全局条件区分低版本的IE浏览器并进行调整，这显然要优于使用CSS Hack。</li>
<li>可以避免<a href="http://webforscher.wordpress.com/2010/05/20/ie-6-slowing-down-ie-8/">IE6条件注释引起的高版本IE文件阻塞问题</a>，原文的解决方法是在前面加一个空白的条件注释，但是这里显然将原本无用空白的条件注释变得有意义了。</li>
<li>仍然可以通过HTML验证。</li>
<li>与Modernizr等特征检测类库使用相同的class，更具备通用性。</li>
</ul>
<p><code>no-js</code>标签是需要与Modernizr等类库配合使用的，如果你不想在项目中引入Modernizr，需要在Head部分加入一行使<code>no-js</code>标签变为<code>js</code>，代码来自<a href="http://paulirish.com/2009/avoiding-the-fouc-v3/">Avoiding the FOUC</a>：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  (</span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">H</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    H</span><span style="color:#E1E4E8">.className </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> H</span><span style="color:#E1E4E8">.className.</span><span style="color:#B392F0">replace</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">/</span><span style="color:#F97583">\b</span><span style="color:#DBEDFF">no-js</span><span style="color:#F97583">\b</span><span style="color:#9ECBFF">/</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"js"</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">  })(document.documentElement);</span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>通过上面的条件注释，就可以在CSS中针对不同情况分别处理</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>.lt-ie7 {} /* IE6等版本时 */</span></span>
<span class="line"><span>.no-js {} /* JavaScript没有启用时 */</span></span></code></pre>
<h3 id="meta标签的书写顺序">meta标签的书写顺序</h3>
<p>为了让浏览器识别正确的编码，meta charset标签应该先于title标签出现。</p>
<p>meta X-UA-Compatible标签可以指定IE8以上版本浏览器以最高级模式渲染文档，同时如果已经安装<a href="http://www.google.com/chromeframe?quickenable=true">Google Chrome Frame</a>则直接使用Chrome Frame渲染。而指定渲染模式的<a href="http://msdn.microsoft.com/en-us/library/cc288325%28VS.85%29.aspx">meta X-UA-Compatible标签同样需要优先出现</a></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">meta</span><span style="color:#B392F0"> charset</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"utf-8"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">meta</span><span style="color:#B392F0"> http-equiv</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"X-UA-Compatible"</span><span style="color:#B392F0"> content</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"IE=edge,chrome=1"</span><span style="color:#E1E4E8"> /></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">title</span><span style="color:#E1E4E8">>&#x3C;/</span><span style="color:#85E89D">title</span><span style="color:#E1E4E8">></span></span></code></pre>
<h3 id="设置移动设备显示窗口宽度">设置移动设备显示窗口宽度</h3>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">meta</span><span style="color:#B392F0"> name</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"viewport"</span><span style="color:#B392F0"> content</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"width=device-width"</span><span style="color:#E1E4E8"> /></span></span></code></pre>
<p>这是移动设备专属的标签，具体设置需要根据项目实际情况调整。</p>
<h3 id="使用modernizr做浏览器差异检测">使用Modernizr做浏览器差异检测</h3>
<p><a href="http://modernizr.com/">Modernizr</a>常做前端的应该都不陌生。引入Modernizr后，html标签的<code>no-js</code>将会被自动替换为<code>js</code>，同时Modernizr会向html标签添加代表版本检测结果的class。</p>
<p>对于低版本浏览器的向上兼容需要根据项目实际需求处理，Modernizr也非常周到的给出的<a href="https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills">绝大多数HTML5功能的兼容方法</a>。</p>
<h2 id="css篇">CSS篇</h2>
<h3 id="css重置及增强功能">CSS重置及增强功能</h3>
<p>HTML5 Boilerplate选择<a href="https://github.com/necolas/normalize.css">Normalize.css</a>重置CSS。如果项目计划引入Twitter Bootstrap、YUI 3这些前端框架的话则可以移除，因为这些框架已经内置了Normalize.css。</p>
<p>同时HTML5 Boilerplate又引入了一个main.css，内置了一些基本的排版样式以及打印样式。</p>
<h3 id="使用less或sass生成css">使用LESS或Sass生成CSS</h3>
<p>在复杂应用中，如果还手写CSS的话将是一件痛苦的事情，大量的class前缀，复用样式需要来回copy等等。为了更好的扩展性，这里建议在项目中引入<a href="http://lesscss.org/">LESS</a>或<a href="http://sass-lang.com/">Sass</a>。这代表着：</p>
<ul>
<li>支持变量与简单运算</li>
<li>支持CSS片段复用</li>
<li>class/id样式嵌套</li>
</ul>
<p>等一些更像是编程语言的特性。这对于提高开发效率是效果非常明显的。</p>
<p>以LESS为例，简单介绍一下LESS在Windows下如何应用到这个项目中：</p>
<ul>
<li>下载<a href="http://nodejs.org/">Nodejs</a>并安装，nodejs会自动将自己加入系统路径。</li>
<li>在cmd运行</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>npm install -g less</span></span></code></pre>
<ul>
<li>然后就可以通过lessc指令将less源文件编译为css</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>lessc avnpc.less avnpc.css</span></span></code></pre>
<ul>
<li>如果不使用nodeJs作为后端，最好在写LESS时采用watch模式，每次保存自动编译为css。这里需要安装一个辅助模块recess：</li>
</ul>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>npm install -g recess</span></span></code></pre>
<p>然后运行watch</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="plaintext"><code><span class="line"><span>recess avnpc.less:avnpc.css --watch</span></span></code></pre>
<h2 id="javascript篇">Javascript篇</h2>
<h3 id="使用requirejs按需加载">使用requireJS按需加载</h3>
<p>模块加载器的概念可能稍微接触过前端开发的童鞋都不会陌生，通过模块加载器可以有效的解决这些问题：</p>
<ul>
<li>JS文件的依赖关系。</li>
<li>通过异步加载优化script标签引起的阻塞问题</li>
<li>可以简单的以文件为单位将功能模块化并实现复用</li>
</ul>
<p>主流的JS模块加载器有<a href="http://requirejs.org/">requireJS</a>，<a href="http://seajs.org/docs/">SeaJS</a>等，加载器之间可能会因为遵循的规范不同有微妙的差别，从纯用户的角度出发，之所以选requireJS而不是SeaJS主要是因为：</p>
<ul>
<li>功能实现上两者相差无几，没有明显的性能差异或重大问题。</li>
<li>文档丰富程度上，requireJS远远好于SeaJS，就拿最简单的加载jQuery和jQuery插件这回事，虽然两者的实现方法相差无几，但requireJS就有可以直接拿来用的Demo，SeaJS还要读文档自己慢慢折腾。一些问题的解决上，requireJS为关键词也更容易找到答案。</li>
</ul>
<h4 id="requirejs-加载jquery--jquery插件">requireJS 加载jQuery + jQuery插件</h4>
<p>可能对于一般Web App来说，引入jQuery及相关插件的概率是最大的，requireJS也亲切的给出了相应的解决方案及<a href="http://requirejs.org/docs/jquery.html">动态加载jQuery及插件</a>的文档及<a href="http://requirejs.org/docs/download.html#samplejquery">实例代码</a>。</p>
<p>在最新的jQuery1.9.X中，jQuery已经在最后直接将自己注册为一个<a href="https://github.com/amdjs/amdjs-api/wiki/AMD">AMD模块</a>，即是说可以直接被requireJS作为模块加载。如果是加载旧版的jQuery有两种方法：</p>
<p><strong>1. 让jQuery先于requireJS加载</strong></p>
<p><strong>2. 对jQuery代码稍做一点处理，在jQuery代码包裹一句：</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">define</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">"jquery"</span><span style="color:#E1E4E8">], </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">$</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // $ is guaranteed to be jQuery now */</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>requireJS的示例中，直接将requireJS与jQuery合并为一个文件，如果是采用jQuery作为核心库的话推荐这种做法。</p>
<p>同样对于jQuery插件来说也有两种方法</p>
<p><strong>1. 在插件外包裹代码</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">define</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">"jquery"</span><span style="color:#E1E4E8">], </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">$</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  // Put here the plugin code.</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p><strong>2. 在使用reuqireJS代码加载前注册插件（比如在main.js）中</strong></p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">requirejs.</span><span style="color:#B392F0">config</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  shim: {</span></span>
<span class="line"><span style="color:#9ECBFF">    "jquery-cookie"</span><span style="color:#E1E4E8">: [</span><span style="color:#9ECBFF">"jquery"</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h4 id="requirejs加载第三方类库">requireJS加载第三方类库</h4>
<p>在实例的App中还用到了jQuery以外的第三方类库，如果类库不是一个标准的AMD模块而又不想更改这些类库的代码，同样需要提前进行定义：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">require.</span><span style="color:#B392F0">config</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  paths: {</span></span>
<span class="line"><span style="color:#E1E4E8">    underscore: </span><span style="color:#9ECBFF">"vendor/underscore"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  shim: {</span></span>
<span class="line"><span style="color:#E1E4E8">    underscore: {</span></span>
<span class="line"><span style="color:#E1E4E8">      exports: </span><span style="color:#9ECBFF">"_"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<h4 id="css文件的模块化处理">CSS文件的模块化处理</h4>
<p>在requireJS中，模块的概念仅限于JS文件，如果需要加载图片、JSON等非JS文件，requireJS实现了一系列<a href="http://requirejs.org/docs/plugins.html">加载插件</a>。</p>
<p>但是遗憾的是requireJS官方没有对CSS进行模块化处理，而我们在实际项目中却往往能遇到一些场景，比如一个轮播的图片展示栏，比如高级编辑器等等。几乎所有的富UI组件都会由JS与CSS两部分构成，而CSS之间也存在着模块的概念以及依赖关系。</p>
<p>为了更好的与requireJS整合，这里采用<a href="https://github.com/guybedford/require-css">require-css</a>来解决CSS的模块化与依赖问题。</p>
<p>require-css是一个requireJS插件，下载后将<code>css.js</code>与<code>normalize.js</code>放于main.js同级即可默认被加载，比如在我们的项目中需要加载jQuery Mobile的css文件，那么可以直接这样调用：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">require</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">"jquery"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"css!../css/jquery.mobile-1.3.0.min.css"</span><span style="color:#E1E4E8">], </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">$</span><span style="color:#E1E4E8">) {});</span></span></code></pre>
<p>不过由于这个CSS本质上是属于jQuery Mobile模块的一部分，更好的做法是将这个CSS文件的定义放在jQuery Mobile的依赖关系中，最终我们的requireJS定义部分为：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">require.</span><span style="color:#B392F0">config</span><span style="color:#E1E4E8">({</span></span>
<span class="line"><span style="color:#E1E4E8">  paths: {</span></span>
<span class="line"><span style="color:#E1E4E8">    jquerymobile: </span><span style="color:#9ECBFF">"vendor/jquery.mobile-1.3.0"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    jstorage: </span><span style="color:#9ECBFF">"vendor/jstorage"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    underscore: </span><span style="color:#9ECBFF">"vendor/underscore"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  shim: {</span></span>
<span class="line"><span style="color:#E1E4E8">    jquerymobile: {</span></span>
<span class="line"><span style="color:#E1E4E8">      deps: [</span><span style="color:#9ECBFF">"css!../css/jquery.mobile-1.3.0.min.css"</span><span style="color:#E1E4E8">],</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">    underscore: {</span></span>
<span class="line"><span style="color:#E1E4E8">      exports: </span><span style="color:#9ECBFF">"_"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">    },</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>在使用模块时，只需要：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">require</span><span style="color:#E1E4E8">([</span><span style="color:#9ECBFF">"jquery"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"underscore"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"jquerymobile"</span><span style="color:#E1E4E8">, </span><span style="color:#9ECBFF">"jstorage"</span><span style="color:#E1E4E8">], </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span></span>
<span class="line"><span style="color:#FFAB70">  $</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#FFAB70">  _</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">) {});</span></span></code></pre>
<p>jQuery Mobile的CSS文件就会被自动加载，这样CSS与JS就被整合为一个模块了。同理其他有复杂依赖关系的模块也可以做类似处理，requireJS会解决依赖关系的逻辑。</p>
<h3 id="数据源的加载与等待">数据源的加载与等待</h3>
<p>Web App一般都会动态加载后端的数据，数据格式一般可以是JSON、JSONP也可以直接是一个JS变量。这里以JS变量为例</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> restaurants </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> [</span></span>
<span class="line"><span style="color:#E1E4E8">  {</span></span>
<span class="line"><span style="color:#E1E4E8">    name: </span><span style="color:#9ECBFF">"KFC"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  {</span></span>
<span class="line"><span style="color:#E1E4E8">    name: </span><span style="color:#9ECBFF">"7-11"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  {</span></span>
<span class="line"><span style="color:#E1E4E8">    name: </span><span style="color:#9ECBFF">"成都小吃"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">];</span></span></code></pre>
<p>载入这段数据:</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">$.</span><span style="color:#B392F0">getScript</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"data/restaurants.json"</span><span style="color:#E1E4E8">, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">  var</span><span style="color:#E1E4E8"> data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> window.restaurants;</span></span>
<span class="line"><span style="color:#B392F0">  alert</span><span style="color:#E1E4E8">(data[</span><span style="color:#79B8FF">0</span><span style="color:#E1E4E8">].name); </span><span style="color:#6A737D">//KFC</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span></code></pre>
<p>单一的数据源确实很简单，但是往往一个应用中会有多个数据源，比如在这个实例App中UI就需要载入用户信息、餐厅信息、订餐信息三种数据后才能工作。如果仅仅靠多层嵌套回调函数的话，可能代码的耦合就非常重了。</p>
<p>为了解决多个数据加载的问题，我习惯的解决方法是构造一个dataReady事件响应机制。</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> foodOrder </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#6A737D">  //数据载入后要执行的函数暂存在这里</span></span>
<span class="line"><span style="color:#E1E4E8">  dataReadyFunc: [],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  //数据源URL及载入状态</span></span>
<span class="line"><span style="color:#E1E4E8">  dataSource: [</span></span>
<span class="line"><span style="color:#E1E4E8">    { url: </span><span style="color:#9ECBFF">"data/restaurants.json"</span><span style="color:#E1E4E8">, ready: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">, data: </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">    { url: </span><span style="color:#9ECBFF">"data/users.json"</span><span style="color:#E1E4E8">, ready: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">, data: </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">    { url: </span><span style="color:#9ECBFF">"data/foods.json"</span><span style="color:#E1E4E8">, ready: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">, data: </span><span style="color:#79B8FF">null</span><span style="color:#E1E4E8"> },</span></span>
<span class="line"><span style="color:#E1E4E8">  ],</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  //检查数据源是否全部载入完毕</span></span>
<span class="line"><span style="color:#B392F0">  isReady</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> isReady </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> key </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.dataSource) {</span></span>
<span class="line"><span style="color:#F97583">      if</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.dataSource[key].ready </span><span style="color:#F97583">!==</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">        isReady </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#F97583">    return</span><span style="color:#E1E4E8"> isReady;</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  //数据源全部加载完毕，则逐一运行dataReadyFunc中存放的函数</span></span>
<span class="line"><span style="color:#B392F0">  callReady</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#79B8FF">true</span><span style="color:#F97583"> ===</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">isReady</span><span style="color:#E1E4E8">()) {</span></span>
<span class="line"><span style="color:#F97583">      for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> key </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.dataReadyFunc) {</span></span>
<span class="line"><span style="color:#79B8FF">        this</span><span style="color:#E1E4E8">.dataReadyFunc[key]();</span></span>
<span class="line"><span style="color:#E1E4E8">      }</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D">  //供外部调用，会将外部输入的函数暂存在dataReadyFunc中</span></span>
<span class="line"><span style="color:#B392F0">  dataReady</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">func</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">    if</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">typeof</span><span style="color:#E1E4E8"> func </span><span style="color:#F97583">!==</span><span style="color:#9ECBFF"> "function"</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#F97583">      return</span><span style="color:#79B8FF"> false</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.dataReadyFunc.</span><span style="color:#B392F0">push</span><span style="color:#E1E4E8">(func);</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">  init</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#E1E4E8"> self </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#F97583">    var</span><span style="color:#B392F0"> _initElement</span><span style="color:#F97583"> =</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">key</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">url</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#E1E4E8">      $.</span><span style="color:#B392F0">getScript</span><span style="color:#E1E4E8">(url, </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">e</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">        //每次载入数据后，将数据存放于dataSource中，将ready状态置为true，并调用callReady</span></span>
<span class="line"><span style="color:#E1E4E8">        self.dataSource[key].data </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> window[key];</span></span>
<span class="line"><span style="color:#E1E4E8">        self.dataSource[key].ready </span><span style="color:#F97583">=</span><span style="color:#79B8FF"> true</span><span style="color:#E1E4E8">;</span></span>
<span class="line"><span style="color:#E1E4E8">        self.</span><span style="color:#B392F0">callReady</span><span style="color:#E1E4E8">();</span></span>
<span class="line"><span style="color:#E1E4E8">      });</span></span>
<span class="line"><span style="color:#E1E4E8">    };</span></span>
<span class="line"><span style="color:#F97583">    for</span><span style="color:#E1E4E8"> (</span><span style="color:#F97583">var</span><span style="color:#E1E4E8"> key </span><span style="color:#F97583">in</span><span style="color:#79B8FF"> this</span><span style="color:#E1E4E8">.dataSource) {</span></span>
<span class="line"><span style="color:#B392F0">      _initElement</span><span style="color:#E1E4E8">(key, </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.dataSource[key].url);</span></span>
<span class="line"><span style="color:#E1E4E8">    }</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span></code></pre>
<p>用法为</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#E1E4E8">foodOrder.</span><span style="color:#B392F0">dataReady</span><span style="color:#E1E4E8">(</span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> () {</span></span>
<span class="line"><span style="color:#B392F0">  alert</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">1</span><span style="color:#E1E4E8">);</span></span>
<span class="line"><span style="color:#E1E4E8">});</span></span>
<span class="line"><span style="color:#E1E4E8">foodOrder.</span><span style="color:#B392F0">init</span><span style="color:#E1E4E8">();</span></span></code></pre>
<p>dataReady内的alert将会在所有数据载入完毕后开始执行。</p>
<p>这段处理的逻辑并不复杂，将所有要执行的方法通过dataReady暂存起来，等待数据全部加载完毕后再执行，更加复杂的场景此方法仍然通用。</p>
<h3 id="使用js模板引擎">使用JS模板引擎</h3>
<p>数据载入后，最终都会以某种形式显示在页面上。简单情况，我们可能会这样做：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">$</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"body"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">append</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"&#x3C;div>"</span><span style="color:#F97583"> +</span><span style="color:#E1E4E8"> data.name </span><span style="color:#F97583">+</span><span style="color:#9ECBFF"> "&#x3C;/div>"</span><span style="color:#E1E4E8">);</span></span></code></pre>
<p>如果页面逻辑一旦复杂，比如需要有if判断或者多层循环时，这种连接字符串的方式就相形见绌了，而这也就催生出了JS模板引擎。</p>
<p>主流的JS模板引擎有<a href="http://documentcloud.github.com/underscore/">underscore.js</a>，<a href="http://jade-lang.com/">Jade</a>，<a href="http://embeddedjs.com/">EJS</a>等等，可以<a href="http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more">横向对比一下这些JS模板引擎的优缺点</a>。</p>
<p>对于相对简单的页面逻辑（只需要支持if和for/each）来说，我更倾向选用轻巧的underscore.js或者<a href="https://github.com/blueimp/JavaScript-Templates">JavaScript Templates</a>。</p>
<p>在当前例子中，使用underscore.js生成列表就非常简单了，页面模板为：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">ul</span><span style="color:#B392F0"> data-role</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"listview"</span><span style="color:#B392F0"> data-inset</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"true"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">script</span><span style="color:#B392F0"> id</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"tmpl-restaurants"</span><span style="color:#B392F0"> type</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"text/template"</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;% _.each(data, function(restaurant) { %></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">            &#x3C;</span><span style="color:#85E89D">a</span><span style="color:#B392F0"> href</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"#"</span><span style="color:#B392F0"> data-rel</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"back"</span><span style="color:#B392F0"> data-value</span><span style="color:#E1E4E8">=</span><span style="color:#9ECBFF">"&#x3C;%- restaurant.name%>"</span><span style="color:#E1E4E8">>&#x3C;%- restaurant.name%>&#x3C;/</span><span style="color:#85E89D">a</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">        &#x3C;/</span><span style="color:#85E89D">li</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;% }); %></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">script</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">ul</span><span style="color:#E1E4E8">></span></span></code></pre>
<p>调用引擎</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#B392F0">$</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"#tmpl-restaurants"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">replaceWith</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">  _.</span><span style="color:#B392F0">template</span><span style="color:#E1E4E8">(</span><span style="color:#B392F0">$</span><span style="color:#E1E4E8">(</span><span style="color:#9ECBFF">"#tmpl-restaurants"</span><span style="color:#E1E4E8">).</span><span style="color:#B392F0">html</span><span style="color:#E1E4E8">(), {</span></span>
<span class="line"><span style="color:#E1E4E8">    data: restaurants,</span></span>
<span class="line"><span style="color:#E1E4E8">  }),</span></span>
<span class="line"><span style="color:#E1E4E8">);</span></span></code></pre>
<h3 id="面向对象与模块化">面向对象与模块化</h3>
<p>通过上面这些工具的组合，我们有了模块的概念，有了模板引擎，有数据的加载。最终还是要通过javascript将这一切组织在一起并加入应用所需要的逻辑。为了能最大限度的复用代码，用面向对象的方式去组织内容是比较好的选择。</p>
<p>JavaScript虽然原生并不支持面向对象，但是依然可以通过很多方式模拟出面向对象的特性。例子中采用了我个人比较喜欢的一种方式是：</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="js"><code><span class="line"><span style="color:#F97583">var</span><span style="color:#B392F0"> foodOrder</span><span style="color:#F97583"> =</span><span style="color:#F97583"> function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">ui</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">options</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#6A737D">  //构造函数</span></span>
<span class="line"><span style="color:#79B8FF">  this</span><span style="color:#E1E4E8">.</span><span style="color:#B392F0">init</span><span style="color:#E1E4E8">(ui, options);</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"><span style="color:#79B8FF">foodOrder</span><span style="color:#E1E4E8">.</span><span style="color:#79B8FF">prototype</span><span style="color:#F97583"> =</span><span style="color:#E1E4E8"> {</span></span>
<span class="line"><span style="color:#E1E4E8">  defaultUI: {</span></span>
<span class="line"><span style="color:#E1E4E8">    form: </span><span style="color:#9ECBFF">"#form-order"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  defaultOptions: {</span></span>
<span class="line"><span style="color:#E1E4E8">    debug: </span><span style="color:#79B8FF">false</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#B392F0">  init</span><span style="color:#E1E4E8">: </span><span style="color:#F97583">function</span><span style="color:#E1E4E8"> (</span><span style="color:#FFAB70">ui</span><span style="color:#E1E4E8">, </span><span style="color:#FFAB70">options</span><span style="color:#E1E4E8">) {</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.ui </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> $.</span><span style="color:#B392F0">extend</span><span style="color:#E1E4E8">({}, </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.defaultUI, ui);</span></span>
<span class="line"><span style="color:#79B8FF">    this</span><span style="color:#E1E4E8">.options </span><span style="color:#F97583">=</span><span style="color:#E1E4E8"> $.</span><span style="color:#B392F0">extend</span><span style="color:#E1E4E8">({}, </span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">.defaultOptions, options);</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">};</span></span>
<span class="line"><span style="color:#F97583">var</span><span style="color:#E1E4E8"> order </span><span style="color:#F97583">=</span><span style="color:#F97583"> new</span><span style="color:#B392F0"> foodOrder</span><span style="color:#E1E4E8">(</span></span>
<span class="line"><span style="color:#E1E4E8">  {</span></span>
<span class="line"><span style="color:#E1E4E8">    form: </span><span style="color:#9ECBFF">"#real-form"</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">  {</span></span>
<span class="line"><span style="color:#E1E4E8">    debug: </span><span style="color:#79B8FF">true</span><span style="color:#E1E4E8">,</span></span>
<span class="line"><span style="color:#E1E4E8">  },</span></span>
<span class="line"><span style="color:#E1E4E8">);</span></span></code></pre>
<p>将页面的UI元素以及配置项目抽象出来，在实际构造对象时则可以通过入口参数复写，可以分离整个项目的逻辑与UI，使处理的方式更加灵活。</p>
<hr>
<p><strong>2013-07-02 19:08:09</strong></p> </article>  </div> </main> <aside class="hidden lg:block sticky top-0 h-screen w-64 flex-shrink-0 py-8 pl-8"> <div class="space-y-4"> <div class="rounded-xl border bg-card text-card-foreground shadow"><div class="p-6 pt-0"><ul><li><a href="#从选择一个好模板开始">从选择一个好模板开始</a></li><li><a href="#制定统一的编码规范">制定统一的编码规范</a></li><li><a href="#html篇">HTML篇</a></li><li><a href="#使用条件注释区分ie浏览器">使用条件注释区分IE浏览器</a></li><li><a href="#meta标签的书写顺序">meta标签的书写顺序</a></li><li><a href="#设置移动设备显示窗口宽度">设置移动设备显示窗口宽度</a></li><li><a href="#使用modernizr做浏览器差异检测">使用Modernizr做浏览器差异检测</a></li><li><a href="#css篇">CSS篇</a></li><li><a href="#css重置及增强功能">CSS重置及增强功能</a></li><li><a href="#使用less或sass生成css">使用LESS或Sass生成CSS</a></li><li><a href="#javascript篇">Javascript篇</a></li><li><a href="#使用requirejs按需加载">使用requireJS按需加载</a></li><li><a href="#requirejs-加载jquery--jquery插件">requireJS 加载jQuery + jQuery插件</a></li><li><a href="#requirejs加载第三方类库">requireJS加载第三方类库</a></li><li><a href="#css文件的模块化处理">CSS文件的模块化处理</a></li><li><a href="#数据源的加载与等待">数据源的加载与等待</a></li><li><a href="#使用js模板引擎">使用JS模板引擎</a></li><li><a href="#面向对象与模块化">面向对象与模块化</a></li></ul></div></div> <div class="rounded-xl border bg-card text-card-foreground shadow"><div class="flex flex-col space-y-1.5 p-6"><div class="font-semibold leading-none tracking-tight">Tags</div></div><div class="p-6 pt-0"><div class="flex flex-wrap gap-2"><a href="/tags/article" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">article</a><a href="/tags/event" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">event</a><a href="/tags/rust" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">rust</a><a href="/tags/iced" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">iced</a><a href="/tags/gui" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">gui</a><a href="/tags/multiplatform" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">multiplatform</a><a href="/tags/mobile" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">mobile</a><a href="/tags/web" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">web</a><a href="/tags/Kotlin" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">Kotlin</a><a href="/tags/linux" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">linux</a><a href="/tags/dns" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">dns</a><a href="/tags/javascript" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">javascript</a><a href="/tags/async" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">async</a><a href="/tags/reactive" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">reactive</a><a href="/tags/html&amp;css" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">html&amp;css</a><a href="/tags/cogitation" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">cogitation</a><a href="/tags/tools" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">tools</a><a href="/tags/efficiency" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">efficiency</a><a href="/tags/trivial" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">trivial</a><a href="/tags/lift" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">lift</a><a href="/tags/C++" class="bg-gray-200 dark:bg-gray-700 rounded-full px-3 py-1 text-sm font-semibold">C++</a></div></div></div> <div class="rounded-xl border bg-card text-card-foreground shadow"><div class="flex flex-col space-y-1.5 p-6"><div class="font-semibold leading-none tracking-tight">Archive</div></div><div class="p-6 pt-0"><ul><li><a href="/archive/2025/09">2025-09<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2025/06">2025-06<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2025/05">2025-05<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2025/04">2025-04<!-- --> (<!-- -->12<!-- -->)</a></li><li><a href="/archive/2025/03">2025-03<!-- --> (<!-- -->9<!-- -->)</a></li><li><a href="/archive/2024/05">2024-05<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2024/04">2024-04<!-- --> (<!-- -->3<!-- -->)</a></li><li><a href="/archive/2023/05">2023-05<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2023/04">2023-04<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2023/03">2023-03<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2022/10">2022-10<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2022/04">2022-04<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2021/12">2021-12<!-- --> (<!-- -->3<!-- -->)</a></li><li><a href="/archive/2021/07">2021-07<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2021/04">2021-04<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2020/10">2020-10<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2020/09">2020-09<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2020/05">2020-05<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2020/04">2020-04<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2020/03">2020-03<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2018/07">2018-07<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2017/10">2017-10<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2017/03">2017-03<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2016/10">2016-10<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2016/09">2016-09<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2016/08">2016-08<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2016/07">2016-07<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2016/05">2016-05<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2016/03">2016-03<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2016/02">2016-02<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2015/02">2015-02<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2014/09">2014-09<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2014/04">2014-04<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2014/03">2014-03<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2014/02">2014-02<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2014/01">2014-01<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2013/12">2013-12<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2013/10">2013-10<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2013/09">2013-09<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2013/08">2013-08<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2013/07">2013-07<!-- --> (<!-- -->2<!-- -->)</a></li><li><a href="/archive/2013/06">2013-06<!-- --> (<!-- -->1<!-- -->)</a></li><li><a href="/archive/2013/05">2013-05<!-- --> (<!-- -->4<!-- -->)</a></li></ul></div></div> </div> </aside> </div> <astro-island uid="Tziuc" prefix="r11" component-url="/_astro/BackToTop.B6mUL4XD.js" component-export="default" renderer-url="/_astro/client.6DCnCeAt.js" props="{}" ssr client="load" opts="{&quot;name&quot;:&quot;BackToTop&quot;,&quot;value&quot;:true}" await-children><button type="button" aria-label="Back to top" class="fixed right-8 bottom-8 z-50 flex h-12 w-12 items-center justify-center rounded-full bg-zinc-900/20 text-white shadow-lg backdrop-blur-sm backdrop-saturate-200 transition-opacity duration-300 hover:bg-zinc-700 dark:bg-zinc-100/20 dark:text-zinc-900 dark:hover:bg-zinc-300 opacity-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-arrow-up" aria-hidden="true"><path d="m5 12 7-7 7 7"></path><path d="M12 19V5"></path></svg></button><!--astro:end--></astro-island>  </body></html>