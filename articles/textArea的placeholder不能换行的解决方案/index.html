<!doctype html><html lang=zh-CH><meta charset=utf-8><title>textArea的placeholder不能换行的解决方案 · Gaubee</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/css/main.css rel=stylesheet><link href=/webmanifest.json rel=manifest><meta content=#ec407a name=theme-color><link href=/articles.atom rel=alternate title="Gaubee's Articles Atom feed" type=application/atom+xml><link href=/events.atom rel=alternate title="Gaubee's Events Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><header id=header><h1><a href=/ >Gaubee</a></h1><a href=#navigation-toggle id=nav-toggle>显示导航 Show navigation</a><nav><ul><li><a href=/ >主页 Home</a><li class=current><a href=/articles>文章 Articles</a><li><a href=/events>小事件 Events</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>textArea的placeholder不能换行的解决方案</h1><p class=meta>发布于 <time datetime=10/11/2013 itemprop=datePublished>10/11/2013</time> · 最后修改时间 <time datetime=1/9/2015 itemprop=dateModified>1/9/2015</time></header><div itemprop=articleBody><p><em>JS解决方案当然是最万能的。</em><br>所以这里主要讲的是CSS解决方案，整理自鬼懿IT高级群的讨论 <em>10-11-2013</em>。<br>先上一段官方的说辞：<blockquote><p>The placeholder attribute represents a short hint (a word or short phrase) intended to aid the user with data entry. A hint could be a sample value or a brief description of the expected format. The attribute, if specified, must have a value that contains no U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR) characters.</blockquote><h2 id=1 tabindex=-1><a href=#1 class=header-anchor>1</a></h2><p>首先要知道的是HTML属性中的值会原封不动地输出到页面中，所以：<pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>line1  \n lin2 &lt;br> line3 \A line4 <br>line5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span></code></pre><p>是不会其任何作用的（这里line4和line5中的回车写法会被过滤掉，但是title属性就不会）。<br>所以就要借用到CSS。<h2 id=2 tabindex=-1><a href=#2 class=header-anchor>2</a></h2><p>先说webkit浏览器的解决方案：<br>首先要知道placeholder属性是可以用css来操作的，设置字体颜色、字体大小等等等。<br>（相关文章：<a href=http://davidwalsh.name/html5-placeholder-css>HTML5 Placeholder Styling with CSS</a>）<br>所以我们就可以用after伪类来实现把placeholder内容写到CSS中，这样就绕开了HTML属性的渲染方案：<pre class=language-css><code class=language-css><span class="token selector">textarea::-webkit-input-placeholder:after</span><span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"line@ \A line#"</span><span class="token punctuation">;</span><span class="token comment">/* 这里 \A 形成回车符号  */</span><br>  <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2 id=3 tabindex=-1><a href=#3 class=header-anchor>3</a></h2><p>在兼容性写法中，不同浏览器的标示要分开来写，否则使解析器混淆CSS语义：<pre class=language-css><code class=language-css><span class="token comment">/* 错误写法 */</span><br><span class="token selector">input::-webkit-input-placeholder,<br>input:-moz-placeholder</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span></code></pre><pre class=language-css><code class=language-css><span class="token comment">/* 正确写法 */</span><br><span class="token selector">input::-webkit-input-placeholder</span><span class="token punctuation">{</span><span class="token punctuation">}</span><br><br><span class="token selector">input:-moz-placeholder</span><span class="token punctuation">{</span><span class="token punctuation">}</span><br></code></pre><h2 id=4 tabindex=-1><a href=#4 class=header-anchor>4</a></h2><p>然而群里面还对此提出一个观点，就是不应该在CSS中写应该在HTML中写的内容：<blockquote><p>多语言的应用，这样还得连css也加入翻译转换<br>(js)不太靠谱，css这东西顺序有关，你知道插哪儿啊<blockquote><p>240</blockquote></blockquote><p>总之，这种绕着弯子完成的解决方案本身就有缺陷，毕竟没有那么多空子给你转。<h2 id=5 tabindex=-1><a href=#5 class=header-anchor>5</a></h2><p>另外，通过 <strong>计算空格</strong> 来让placeholder自动换行也是个比较恶心的解决方案。但精力上绝对比较省，需要些一个计算空格的函数，耦合度也不会像上面CSS解决方案那么高。<h2 id=6 tabindex=-1><a href=#6 class=header-anchor>6</a></h2><p>最后还有一个值得一提的就是下面这种无法生效的写法：<pre class=language-html><code class=language-html><span class="token comment">&lt;!-- placeholder属性必须存在且非空 --></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> <span class="token punctuation">"</span></span> <span class="token attr-name">data-placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>\A  line2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span></code></pre><pre class=language-css><code class=language-css><span class="token selector">textarea::-webkit-input-placeholder:after</span><span class="token punctuation">{</span><br>  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"line1"</span> <span class="token function">attr</span><span class="token punctuation">(</span>data-placeholder<span class="token punctuation">)</span> <span class="token string">"\A  line3"</span><span class="token punctuation">;</span><br>  <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这里无法获取到data-placeholder属性的值，因为双伪类导致<code>:after</code>的对象不是textarea，而是<code>placeholder</code>（shadow DOM）。<p>最后给出stackoverflow上<a href=http://stackoverflow.com/questions/7189223/can-you-have-multiline-html5-placeholder-text-in-a-textarea>相关的问题及其解答</a>，涉及到更多详细的内容，值得一读。</div><footer></footer></article></main><footer id=footer><div><nav><a href=https://twitter.com/gaubeebangeel rel="me nofollow" target=_blank>Twitter</a> · <a href=https://github.com/gaubee/gaubee.com/tree/main/./src/articles/textArea的placeholder不能换行的解决方案.md rel=nofollow target=_blank>Edit this page on GitHub</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>除非有特别的说明, 该站点所有直接内容都使用许可证：<a href=https://creativecommons.org/licenses/by/4.0/deed.zh>署名 4.0 国际 (CC BY 4.0)</a></small><blockquote><small>本网站不收集任何访问者的行为与信息，不做任何商业运作，仅仅为个人使用</small></blockquote></footer><script src=/js/dark-mode-toggle.mjs type=module></script><script src=/js/time-elements.mjs type=module></script><script src=/js/main.mjs type=module></script>