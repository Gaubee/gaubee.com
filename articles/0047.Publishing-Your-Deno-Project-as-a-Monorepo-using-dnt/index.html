<!doctype html><html><head><meta charset="utf-8"><meta name="description" content=""><meta name="keywords" content="Appn, WebComponent, article"><meta name="author" content="Gaubee, gaubeebangeel@gmail.com"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=5"><title>Publishing Your Deno Project as a Monorepo using dnt</title><link rel="shortcut icon" href="/assets/favicon-wB3RD3gX.ico"><link rel="stylesheet" href="/index.css">  <link rel="stylesheet" crossorigin href="/assets/prism-okaidia-D95GE6Gn.css">
<link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head><body><header class="bg-ani"><style>.nav{padding:0 2em;border-radius:2em;backdrop-filter:contrast(0.5) brightness(2);width:fit-content;max-width:100%}.nav{display:grid;grid-template-columns:repeat(auto-fit,180px);justify-content:center;gap:12px}.nav>a{display:block;flex:1;font-size:18px;padding:16px;text-align:center}.nav>a{color:#e91e63}@supports (-webkit-background-clip:text){.nav>a{background:-webkit-linear-gradient(#e91e63,#673ab7);color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent}}</style><nav class="nav"><a class="" href="/">Home</a> <a class="target" href="/articles/">Articles</a> <a class="" href="/events/">Events</a> <a class="" href="/timeline/">Timeline</a> <a class="" href="/projects/">Projects</a></nav></header><div id="main-wrapper" class="article-wrapper"><main><h1>Publishing Your Deno Project as a Monorepo using dnt</h1><h2>Publishing Your Deno Project as a Monorepo using dnt</h2><blockquote><p>Before providing theoretical guidance, let's look at how to achieve this in practice. After completion, I will explain the advantages of this project management solution.</p></blockquote><h3>Tools</h3><ol><li><a href="https://deno.com/">deno</a></li><li><a href="https://pnpm.io/installation">pnpm</a></li></ol><h3>Preparation</h3><ol><li><p>Create your project:</p><pre class="language-shell"><code class="language-shell">deno init dnt-mono
<span class="token comment"># cd dnt-mono</span>
<span class="token comment"># code . # open in ide</span></code></pre></li><li><p>Initialize a git repository</p><pre class="language-shell"><code class="language-shell"><span class="token function">git</span> init
<span class="token builtin class-name">echo</span> <span class="token string">"npm<span class="token entity" title="\n">\n</span>node_modules"</span> <span class="token operator">></span> .gitignore <span class="token comment"># ignore the npm folder</span></code></pre></li><li><p>Initialize package.json, and other files typically required by npm/pnpm</p><pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> init <span class="token parameter variable">--yes</span> <span class="token parameter variable">--private</span> <span class="token comment"># create a package.json file</span>
<span class="token builtin class-name">echo</span> <span class="token string">"MIT"</span> <span class="token operator">></span> LICENSE
<span class="token builtin class-name">echo</span> <span class="token string">"# Hello Dnt ❤️ Monorepo"</span> <span class="token operator">></span> README.md
<span class="token builtin class-name">echo</span> <span class="token string">"packages:<span class="token entity" title="\n">\n</span>  - <span class="token entity" title="\&quot;">\"</span>npm/*<span class="token entity" title="\&quot;">\"</span>"</span> <span class="token operator">></span> pnpm-workspace.yaml</code></pre></li><li><p>Prepare the dnt script</p><pre class="language-shell"><code class="language-shell">deno <span class="token function">add</span> @deno/dnt</code></pre><p>Refer to <a href="https://github.com/denoland/dnt?tab=readme-ov-file#setup">Setup</a>, as we need to build multiple npm packages, create the <code>scripts/npmBuilder.ts</code> file:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> build<span class="token punctuation">,</span> BuildOptions<span class="token punctuation">,</span> emptyDir <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@deno/dnt"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">"node:fs"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> path <span class="token keyword">from</span> <span class="token string">"node:path"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fileURLToPath <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"node:url"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rootDir <span class="token operator">=</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"../"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">rootResolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> rootDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">npmBuilder</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>config<span class="token operator">:</span> <span class="token punctuation">{</span>
  packageDir<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  version<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  importMap<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  options<span class="token operator">?</span><span class="token operator">:</span> Partial<span class="token operator">&lt;</span>BuildOptions<span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> packageDir<span class="token punctuation">,</span> version<span class="token punctuation">,</span> importMap<span class="token punctuation">,</span> options <span class="token punctuation">}</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">packageResolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span>
    <span class="token function">fileURLToPath</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> packageDir<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> packageJson <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>
    fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token function">packageResolve</span><span class="token punctuation">(</span><span class="token string">"./package.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"utf-8"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// remove some field which dnt will create. if you known how dnt work, you can keep them.</span>
  <span class="token keyword">delete</span> packageJson<span class="token punctuation">.</span>main<span class="token punctuation">;</span>
  <span class="token keyword">delete</span> packageJson<span class="token punctuation">.</span>module<span class="token punctuation">;</span>
  <span class="token keyword">delete</span> packageJson<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>

  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">\nstart dnt: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>packageJson<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> npmDir <span class="token operator">=</span> <span class="token function">rootResolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./npm/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>packageJson<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">npmResolve</span> <span class="token operator">=</span> <span class="token punctuation">(</span>p<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=></span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>npmDir<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> <span class="token function">emptyDir</span><span class="token punctuation">(</span>npmDir<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>version<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>packageJson<span class="token punctuation">,</span> <span class="token punctuation">{</span> version<span class="token operator">:</span> version <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">await</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    entryPoints<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token function">packageResolve</span><span class="token punctuation">(</span><span class="token string">"./index.ts"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    outDir<span class="token operator">:</span> npmDir<span class="token punctuation">,</span>
    packageManager<span class="token operator">:</span> <span class="token string">"pnpm"</span><span class="token punctuation">,</span>
    shims<span class="token operator">:</span> <span class="token punctuation">{</span>
      deno<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// you should open it in actual</span>
    test<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    importMap<span class="token operator">:</span> importMap<span class="token punctuation">,</span>
    <span class="token keyword">package</span><span class="token operator">:</span> packageJson<span class="token punctuation">,</span>
    <span class="token comment">// custom by yourself</span>
    compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      lib<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"DOM"</span><span class="token punctuation">,</span> <span class="token string">"ES2022"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      target<span class="token operator">:</span> <span class="token string">"ES2022"</span><span class="token punctuation">,</span>
      emitDecoratorMetadata<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">postBuild</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// steps to run after building and before running the tests</span>
      Deno<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span><span class="token function">rootResolve</span><span class="token punctuation">(</span><span class="token string">"./LICENSE"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">npmResolve</span><span class="token punctuation">(</span><span class="token string">"./LICENSE"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Deno<span class="token punctuation">.</span><span class="token function">copyFileSync</span><span class="token punctuation">(</span>
        <span class="token function">packageResolve</span><span class="token punctuation">(</span><span class="token string">"./README.md"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function">npmResolve</span><span class="token punctuation">(</span><span class="token string">"./README.md"</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token operator">...</span>options<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></li></ol><h3>Main Steps</h3><ol><li><p>Create two subfolders and add some project files</p><pre class="language-shell"><code class="language-shell"><span class="token comment"># start from root</span>
<span class="token function">mkdir</span> packages/module-a
<span class="token builtin class-name">cd</span> packages/module-a
<span class="token builtin class-name">echo</span> <span class="token string">"export const a = 1;"</span> <span class="token operator">></span> index.ts
<span class="token builtin class-name">echo</span> <span class="token string">"# @dnt-mono/module-a"</span> <span class="token operator">></span> README.md
<span class="token function">npm</span> init <span class="token parameter variable">--scope</span> @dnt-mono <span class="token parameter variable">--yes</span> <span class="token comment"># name: @dnt-mono/module-a</span></code></pre><p>Repeat the steps to create a <code>module-b</code> folder</p><pre class="language-shell"><code class="language-shell"><span class="token comment"># start from root</span>
<span class="token function">mkdir</span> packages/module-b
<span class="token builtin class-name">cd</span> packages/module-b
<span class="token builtin class-name">echo</span> <span class="token string">"import { a } from <span class="token entity" title="\&quot;">\"</span>@dnt-mono/module-a<span class="token entity" title="\&quot;">\"</span>;<span class="token entity" title="\n">\n</span>export const b = a + 1;"</span> <span class="token operator">></span> index.ts
<span class="token builtin class-name">echo</span> <span class="token string">"# @dnt-mono/module-b"</span> <span class="token operator">></span> README.md
<span class="token function">npm</span> init <span class="token parameter variable">--scope</span> @dnt-mono <span class="token parameter variable">--yes</span> <span class="token comment"># name: @dnt-mono/module-b</span>

<span class="token function">pnpm</span> <span class="token function">add</span> @dnt-mono/module-a <span class="token parameter variable">--workspace</span> <span class="token comment"># add module-a as a dependency</span></code></pre></li><li><p>In this example, <code>module-b</code> depends on <code>module-a</code>, and we used the specifier <code>@dnt-mono/module-a</code> in the code, so we need some configurations to make the deno language server work correctly. In the <code>imports</code> field of <code>deno.json</code>, add these configurations:</p><pre class="language-jsonc"><code class="language-jsonc"> "@dnt-mono/module-a": "./packages/module-a/index.ts", // in imports
 "@dnt-mono/module-b": "./packages/module-b/index.ts" // in imports</code></pre></li><li><p>Next, create the build script and configuration files</p><ol><li><p><code>scripts/build_npm.ts</code></p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> npmBuilder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./npmBuilder.ts"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> version <span class="token operator">=</span> Deno<span class="token punctuation">.</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> <span class="token function">npmBuilder</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  packageDir<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"../packages/module-a/"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  importMap<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./import_map.npm.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  version<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">await</span> <span class="token function">npmBuilder</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  packageDir<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"../packages/module-b/"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  importMap<span class="token operator">:</span> <span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./import_map.npm.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  version<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></li><li><p><code>scripts/import_map.npm.json</code></p><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"imports"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"@dnt-mono/module-a"</span><span class="token operator">:</span> <span class="token string">"npm:@dnt-mono/module-a"</span><span class="token punctuation">,</span>
    <span class="token property">"@dnt-mono/module-b"</span><span class="token operator">:</span> <span class="token string">"npm:@dnt-mono/module-b"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></li></ol></li><li><p>Then, in your <code>deno.json</code>, configure the build command:</p><pre class="language-jsonc"><code class="language-jsonc">"build": "deno run -A ./scripts/build_npm.ts" // in tasks</code></pre></li><li><p>Finally, try executing the build command to create the npm directory</p><pre class="language-shell"><code class="language-shell">deno task build</code></pre><p>Now, you should see the npm directory has been populated with the module-a and module-b folders ready for npm publishing. You can try to publish these npm packages:</p><pre class="language-shell"><code class="language-shell"><span class="token function">pnpm</span> publish <span class="token parameter variable">-r</span> --no-git-checks --dry-run <span class="token comment"># you should remove --dry-run for an actual run</span></code></pre></li></ol><h3>How It Works</h3><ol><li>We use deno as the language server, which is quite powerful, vastly improved from tsc itself through customized development.</li><li>So here, the package.json is just a &quot;template file&quot; and not a configuration file. The only configuration file that goes into effect during development is deno.json.</li><li>Hence, pnpm is just a tool for the final output built by dnt, meaning it only serves the <code>npm/*</code> directory. This is also why <code>pnpm-workspaces.yaml</code> is configured as it is.</li><li>The <code>import_map.npm.json</code> used in dnt is essential. We can't use <code>deno.json</code> directly as <code>importMap</code> because <code>deno.json</code> is configured for the deno language server, while <code>import_map.npm.json</code> is for dnt/pnpm use. In complex projects, it's advisable to manage it automatically with a script.</li></ol><h3>Advanced Tips</h3><p>In deno development, our philosophy is file-oriented rather than module-oriented. Therefore, if needed, you may want to add this kind of configuration in <code>deno.json</code>:</p><pre class="language-jsonc"><code class="language-jsonc">{
  // ...
  "imports": {
    // ...
    "@dnt-mono/module-a": "./packages/module-a/index.ts",
    "@dnt-mono/module-a/": "./packages/module-a/src/",
    "@dnt-mono/module-b": "./packages/module-b/index.ts",
    "@dnt-mono/module-b/": "./packages/module-b/src/"
    // ...
  }
}</code></pre><p>I prefer to put files other than <code>index.ts</code> into a <code>src</code> directory, which aligns more with the style of node projects.</p><blockquote><p>However, remember not to move the <code>index.ts</code> file to the <code>src</code> directory as well, as it could cause exceptions <a href="https://github.com/denoland/dnt/issues/249">#249</a>.</p></blockquote><p>Then, it's about the dnt configuration, where you need to iterate over all your files and configure them in the entryPoints:</p><pre class="language-ts"><code class="language-ts"><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  entryPoints<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// default entry</span>
    <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token function">packageResolve</span><span class="token punctuation">(</span><span class="token string">"./index.ts"</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// src files</span>
    <span class="token constant">ALL_SRC_TS_FILES</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Now, you can write code like this:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> xxx <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dnt-mono/module-a/xxx.ts"</span><span class="token punctuation">;</span></code></pre><h3>Points to Note</h3><ol><li>Plan your project structure well to avoid cyclic dependencies. If needed, you should configure peerDependencies yourself.</li><li>Don't self-import within a module.<blockquote><p>The language server doesn't understand that you intend to publish to npm, so even if deno works correctly, your goal is to make it work with node as well.</p></blockquote><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> a <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@dnt-mono/module-a"</span><span class="token punctuation">;</span> <span class="token comment">// don't import module-a in module-a</span></code></pre>It is advisable to write lint rules to avoid these mistakes in actual projects.</li></ol></main></div><style>footer a{line-height:1}footer nav{display:flex;gap:1rem}</style><footer class="bg-ani"><nav><a target="_blank" href="https://github.com/gaubee/gaubee.com">Github</a> <a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/recordQuery">闽ICP备17026139号-1</a></nav></footer></body></html>