<!doctype html><html lang=zh-CN><meta charset=utf-8><title>CSS“文字”渐变，一种比background-clip通用性更好的方案，可以用于SVG中（CSS svg icon gradients, a more versatile solution than background-clip） · Gaubee</title><meta content="width=device-width" name=viewport><meta content="dark light" name=color-scheme><link href=/css/main.css rel=stylesheet><link href=/webmanifest.json rel=manifest><meta content=#ec407a name=theme-color><link href=/articles.atom rel=alternate title="Gaubee's Articles Atom feed" type=application/atom+xml><link href=/events.atom rel=alternate title="Gaubee's Events Atom feed" type=application/atom+xml><script>document.documentElement.className+=" js"</script><header id=header><h1><a href=/ >Gaubee</a></h1><a href=#navigation-toggle id=nav-toggle>显示导航 Show navigation</a><nav><ul><li><a href=/ >主页 Home</a><li class=current><a href=/articles>文章 Articles</a><li><a href=/events>小事件 Events</a></ul></nav></header><main id=main><article itemscope itemtype=http://schema.org/BlogPosting><header><h1 itemprop=headline>CSS“文字”渐变，一种比background-clip通用性更好的方案，可以用于SVG中（CSS svg icon gradients, a more versatile solution than background-clip）</h1><p class=meta>发布于 <time datetime=7/30/2021 itemprop=datePublished>7/30/2021</time> · 最后修改时间 <time datetime=8/5/2021 itemprop=dateModified>8/5/2021</time></header><div itemprop=articleBody><h2 id=%E7%A4%BA%E4%BE%8B-demo tabindex=-1><a href=#%E7%A4%BA%E4%BE%8B-demo class=header-anchor>示例 Demo</a></h2><main id=demo><div id=text-container><div class=gradient-text>SOME <svg class=icon p-id=8288 style=width:1em;height:1em;vertical-align:middle;fill:currentColor;overflow:hidden version=1.1 viewBox="0 0 1024 1024" xmlns=http://www.w3.org/2000/svg><path d="M512 0C230.4 0 0 230.4 0 512s230.4 512 512 512 512-230.4 512-512S793.6 0 512 0z m0 939.2c-235.2 0-427.2-192-427.2-427.2S276.8 84.8 512 84.8s427.2 192 427.2 427.2-192 427.2-427.2 427.2zM320 363.2m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0ZM704 363.2m-64 0a64 64 0 1 0 128 0 64 64 0 1 0-128 0ZM734.4 555.2H289.6c-17.6 0-33.6 8-46.4 20.8s-17.6 33.6-12.8 51.2C256 763.2 376 857.6 512 857.6s256-97.6 281.6-230.4c4.8-17.6 0-33.6-12.8-51.2-12.8-12.8-30.4-20.8-46.4-20.8zM512 772.8c-84.8 0-161.6-56-187.2-132.8H704c-30.4 81.6-107.2 132.8-192 132.8z" p-id=8289></path></svg> TEXT</div></div><div class=controllers><fieldset><legend>背景色 Background Color</legend><input id=bg-color type=color><script>const bindInputColor=(o,n,t)=>{const e=document.querySelector(o);e.oninput=()=>demo.style.setProperty(n,e.value),e.value=t,e.oninput()};bindInputColor("#bg-color","--background-color","#ffffff")</script></fieldset><fieldset><legend>渐变色 Gradient Color</legend><label for=start-color>开始色 Start Color</label> <input id=start-color type=color> <label for=end-color>结束色 End Color</label> <input id=end-color type=color><script>bindInputColor("#start-color","--gradient-color-start","#1f00ff"),bindInputColor("#end-color","--gradient-color-end","#ff0000")</script></fieldset></div><style>#demo{display:flex;flex-direction:column;align-items:center}#text-container{--gradient-color:linear-gradient(
        45deg,
        var(--gradient-color-start),
        var(--gradient-color-end)
      );background-color:var(--background-color);font-size:3em;font-weight:700;display:inline-block}#text-container .gradient-text{display:flex;align-items:center}#text-container .gradient-text{background:var(--gradient-color);color:var(--background-color);position:relative;mix-blend-mode:difference}#text-container .gradient-text::before{content:" ";display:block;position:absolute;top:0;left:0;right:0;bottom:0;background:inherit;mix-blend-mode:difference;pointer-events:none}.controllers{display:flex;justify-content:space-around;flex-wrap:wrap;width:100%}.controllers fieldset{display:flex;align-items:center;justify-content:center;flex-direction:column}</style></main><h2 id=%E8%B5%B7%E5%9B%A0-the-story tabindex=-1><a href=#%E8%B5%B7%E5%9B%A0-the-story class=header-anchor>起因 The Story</a></h2><p>探究这个问题的起因，是源于我打算把公司的图标从 font 逐步转化成 svg。<blockquote><p>My plan is convert the company's icon from font to svg gradually.</blockquote><p>虽然绘制性能有所下降，但是整体的好处是比 font 多得多的：比如“按需引入”，“多色”，“动画”，“可访问性”等等。<blockquote><p>Although the drawing performance maybe reduced, the overall benefits are much more than font: "dynamic import", "multi-color", "animation", "accessibility", etc.</blockquote><p>但之前使用<code>background-clip:text</code>的方案就不好用了，因为默认情况下，svg 的 path 使用的是<code>fill="currentColor"</code>这样的写法。诸多原因，我不得不思考较好的替代的方案。<blockquote><p>But the previous solution of using <code>background-clip:text</code> doesn't work well,<br>because by default, svg's path use <code>fill="currentColor"</code>. For many reasons, I<br>had to think of a better alternative.</blockquote><h2 id=%E5%81%9A%E6%B3%95-usage tabindex=-1><a href=#%E5%81%9A%E6%B3%95-usage class=header-anchor>做法 Usage</a></h2><p>核心思路是使用<code>mix-blend-mode</code>。<blockquote><p>The core idea is to use <code>mix-blend-mode</code>.</blockquote><pre class=language-html><code class=language-html><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>gradient-text<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>SOME TEXT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span></code></pre><pre class=language-css><code class=language-css><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.gradient-text</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--gradient-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">mix-blend-mode</span><span class="token punctuation">:</span> difference<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.gradient-text::before</span> <span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">" "</span><span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>
  <span class="token property">mix-blend-mode</span><span class="token punctuation">:</span> difference<span class="token punctuation">;</span>
  <span class="token property">pointer-events</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><h2 id=%E5%8E%9F%E7%90%86-principle tabindex=-1><a href=#%E5%8E%9F%E7%90%86-principle class=header-anchor>原理 Principle</a></h2><p>DEMO 中，一共有三层定义：<ol><li><code>body</code>：我们称之为 <code>TOP-LAYER-0</code> ；<li><code>.gradient-text</code>：我们称之为 <code>CONTENT-LAYER-1</code> ，它由两部分组成：<ol><li><code>CONTENT-BG-1</code> ：绘制着我们定义的<code>var(--gradient-color)</code><li><code>CONTENT-INNER-2</code> ：绘制着我们的文本、svg 等内容</ol><li><code>.gradient-text::before</code>：我们称之为 <code>TOP-LAYER-3</code> ；</ol><blockquote><p>In Demo, There are three layers defined:<ol><li><code>body</code>: we call it <code>TOP-LAYER-0</code>;<li><code>.gradient-text</code>: we call it "<code>CONTENT-LAYER-1</code>" and it consists of two parts:<ol><li>"<code>CONTENT-BG-1</code>": draws the <code>var(--gradient-color)</code> we defined<li>"<code>CONTENT-INNER-2</code>": drawing our text, svg, etc.</ol><li><code>.gradient-text::before</code>: we call it <code>TOP-LAYER-3</code>；</ol></blockquote><p>所以这里总共有四种景受到影响，我们可以逐一推理每一种景发生的混合：<blockquote><p>So there are a total of four layer affected here, and we can reason about the mix one by one.</blockquote><ol><li><code>TOP-LAYER-0-RES</code> = <code>TOP-LAYER-0</code> ^ <code>CONTENT-BG-1</code> ^ <code>TOP-LAYER-3</code>；<ol><li>∵ <code>CONTENT-BG-1</code> == <code>TOP-LAYER-3</code><li>∴ <code>TOP-LAYER-0-RES</code> = <code>TOP-LAYER-0</code></ol><li><code>CONTENT-BG-1-RES</code> = <code>TOP-LAYER-0</code> ^ <code>CONTENT-BG-1</code> ^ <code>TOP-LAYER-3</code><ol><li>∵ <code>CONTENT-BG-1</code> ^ <code>TOP-LAYER-3</code><li>∴ <code>CONTENT-BG-1-RES</code> = <code>TOP-LAYER-0</code></ol><li><code>CONTENT-INNER-2-RES</code> = <code>TOP-LAYER-0</code> ^ <code>CONTENT-INNER-2</code> ^ <code>TOP-LAYER-3</code><ol><li>∵ <code>TOP-LAYER-0</code> == <code>CONTENT-INNER-2</code><li>∴ <code>CONTENT-INNER-2-RES</code> = <code>TOP-LAYER-3</code></ol><li><code>TOP-LAYER-3-RES</code> = <code>TOP-LAYER-0</code> ^ <code>CONTENT-BG-1</code> ^ <code>TOP-LAYER-3</code><ol><li>∵ <code>CONTENT-BG-1</code> == <code>TOP-LAYER-3</code><li>∴ <code>TOP-LAYER-3-RES</code> = <code>TOP-LAYER-0</code></ol></ol><p>可以看到， <code>TOP-LAYER-0-RES</code> 、 <code>CONTENT-BG-1-RES</code> 、 <code>TOP-LAYER-3-RES</code> 最终都等于 <code>TOP-LAYER-0</code> ，所以它们看上去跟直接看到 <code>TOP-LAYER-0</code> 的效果一样。像是透明层一般。<blockquote><p>As you can see, <code>TOP-LAYER-0-RES</code>, <code>CONTENT-BG-1-RES</code>, and <code>TOP-LAYER-3-RES</code> end up being equal to <code>TOP-LAYER-0</code>, so they look the same as if you see <code>TOP-LAYER-0</code> directly. It looks like a transparent layer.</blockquote><p>只剩下 <code>CONTENT-INNER-2-RES</code> 绘制的是 <code>TOP-LAYER-3</code> 的内容，也就是我们最终需要的渐变色。<blockquote><p>Only <code>CONTENT-INNER-2-RES</code> is left to draw the contents of <code>TOP-LAYER-3</code>, which is the gradient color we eventually need.</blockquote><h2 id=%E7%BC%BA%E9%99%B7-defects tabindex=-1><a href=#%E7%BC%BA%E9%99%B7-defects class=header-anchor>缺陷 Defects</a></h2><ol><li>因为使用混合模式，它需要小心元素所在的父级。如果父级是一个复杂的图层，比如有复杂的背景，那么这个方案就无法生效了。所以父级最好是白色或者黑色</ol><blockquote><ol><li>Because using blend mode, it needs to be careful about the parent layer where the element is located. If the parent is a complex layer, for example with a complex background, then this scheme will not work. so the parent layer should preferably be white or black.</ol></blockquote><ol start=2><li>渐变的颜色不可以是带有透明通道的颜色，但由于这个方案本身就对背景颜色有明确的要求，所以这点可以间接规避。</ol><blockquote><ol start=2><li>The color of the gradient cannot with alpha, but the good thing is that we explicitly require the background color, so this can be circumvented indirectly.</ol></blockquote><h2 id=%E5%B0%8F%E6%8F%90%E7%A4%BA-tip tabindex=-1><a href=#%E5%B0%8F%E6%8F%90%E7%A4%BA-tip class=header-anchor>小提示 Tip</a></h2><p>在复杂的图层中，你可以需要这个 css 属性：<blockquote><p>In complex layers, you can need this css property:</blockquote><pre class=language-css><code class=language-css><span class="token selector">.gradient-text-parent</span> <span class="token punctuation">{</span>
  <span class="token property">isolation</span><span class="token punctuation">:</span> isolate<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div><footer></footer></article></main><footer id=footer><div><nav><a href=https://twitter.com/gaubeebangeel rel="me nofollow" target=_blank>Twitter</a> · <a href="https://github.com/gaubee/gaubee.com/tree/main/./src/articles/CSS“文字”渐变，一种比background－clip通用性更好的方案（CSS svg icon gradients, a more versatile solution than background－clip）.md" rel=nofollow target=_blank>Edit this page on GitHub</a></nav><dark-mode-toggle dark="Light Theme" light="Dark Theme" permanent></dark-mode-toggle></div><p><small>除非有特别的说明, 该站点所有直接内容都使用许可证：<a href=https://creativecommons.org/licenses/by/4.0/deed.zh>署名 4.0 国际 (CC BY 4.0)</a></small><blockquote><small>本网站不收集任何访问者的行为与信息，不做任何商业运作，仅仅为个人使用</small> <small style=display:block><a href=https://beian.miit.gov.cn/#/Integrated/recordQuery>闽ICP备17026139号-1</a></small></blockquote></footer><script src=/js/dark-mode-toggle.mjs type=module></script><script src=/js/time-elements.mjs type=module></script><script src=/js/main.mjs type=module></script>