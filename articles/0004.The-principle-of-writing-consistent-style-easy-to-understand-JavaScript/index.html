<!doctype html><html><head><meta charset="utf-8"><meta name="description" content=""><meta name="keywords" content="Appn, WebComponent, article, javascript"><meta name="author" content="Gaubee, gaubeebangeel@gmail.com"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=5"><title>【转、修】书写具备一致风格、通俗易懂 JavaScript 的原则</title><link rel="shortcut icon" href="/assets/favicon-wB3RD3gX.ico"><link rel="stylesheet" href="/index.css">  <link rel="stylesheet" crossorigin href="/assets/prism-okaidia-D95GE6Gn.css">
</head><body><header class="bg-ani"><style>.nav{padding:0 2em;border-radius:2em;backdrop-filter:contrast(0.5) brightness(2);width:fit-content;max-width:100%}.nav{display:grid;grid-template-columns:repeat(auto-fit,180px);justify-content:center;gap:12px}.nav>a{display:block;flex:1;font-size:18px;padding:16px;text-align:center}.nav>a{color:#e91e63}@supports (-webkit-background-clip:text){.nav>a{background:-webkit-linear-gradient(#e91e63,#673ab7);color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent}}</style><nav class="nav"><a class="" href="/">Home</a> <a class="target" href="/articles/">Articles</a> <a class="" href="/events/">Events</a> <a class="" href="/timeline/">Timeline</a> <a class="" href="/projects/">Projects</a></nav></header><div id="main-wrapper" class="article-wrapper"><main><h1>【转、修】书写具备一致风格、通俗易懂 JavaScript 的原则</h1><h1>书写具备一致风格、通俗易懂 JavaScript 的原则</h1><p><strong><a href="https://github.com/rwldrn/idiomatic.js/blob/master/translations/zh_CN/readme.md">原文地址</a></strong></p><hr><blockquote><p>无论有多少人在维护，所有在代码仓库中的代码理应看起来像同一个人写的。</p><p>下面的清单概括了我作为原作者的所有代码中使用的实践。在我创建的项目中的所有构建代码都必须遵循这些规则。</p><p>我并不想强制别人在其代码或项目中使用我个人所偏好的代码风格；如果已经存在一个通用编码规范，它必须受到尊崇。</p><p><strong>&quot;对风格的挑刺毫无意义可言。它们必须是指导原则，且你必须遵循。&quot;</strong></p><p>-- <em>Rebecca Murphey</em></p><p><strong>&quot;成为一个优秀的成功项目管理者的一个条件是，明白按自己的偏好风格写代码是非常不好的做法。如果成千上万的人都在使用你的代码，那么请尽可能通俗易懂地写出你的代码，而非在规范之下自作聪明地使用自己偏好的风格。&quot;</strong></p><p>-- <em>Idan Gazit</em></p></blockquote><hr><h2>翻译版本</h2><ul><li><a href="https://github.com/rwldrn/idiomatic.js/">ORIGINAL</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/de_DE">German</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/fr_FR">French</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/es_ES">Spanish</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/pt_BR">Portuguese - Brazil</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/ko_KR">Korean</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/ja_JP">Japanese</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/it_IT">Italian</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/ru_RU">Russian</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/ro_RO">Romanian</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/zh_CN">简体中文</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/%D1%81%D1%80_%D0%A1%D0%A0">Serbian - cyrilic alphabet</a></li><li><a href="https://github.com/rwldrn/idiomatic.js/tree/master/translations/sr_SR">Serbian - latin aplphabet</a></li></ul><h2>重要，非常通用资源：</h2><h3>代码质量工具、资源和文献</h3><ul><li><a href="http://docs.codehaus.org/display/SONAR/JavaScript+Plugin">JavaScript Plugin</a> for <a href="http://www.sonarsource.org/">Sonar</a></li><li><a href="http://jsperf.com/">jsPerf</a></li><li><a href="http://jsfiddle.net/">jsFiddle</a></li><li><a href="http://jsbin.com/">jsbin</a></li><li><a href="http://javascriptlint.com/">JavaScript Lint (JSL)</a></li><li><a href="http://jshint.com/">jshint</a></li><li><a href="http://jslint.org/">jslint</a></li></ul><h2>变聪明点</h2><h3><a href="http://es5.github.com/">ECMAScript 5.1 注解版</a></h3><h3><a href="http://ecma-international.org/ecma-262/5.1/">EcmaScript 语言规范, 5.1 版</a></h3><p>下列文档的现实是：1）不完全版，2）<em>必读</em>。我并不全（不总是，always agree）赞同下列所有作者所写的风格，但有一点可以确定的是：他们具备一致性。除此之外，他们还都是这门语言的权威人士。</p><ul><li><a href="http://rmurphey.com/blog/2012/04/12/a-baseline-for-front-end-developers/">Baseline For Front End Developers</a></li><li><a href="http://eloquentjavascript.net/">Eloquent JavaScript</a></li><li><a href="http://javascriptweblog.wordpress.com/">JavaScript, JavaScript</a></li><li><a href="http://rmurphey.com/">Adventures in JavaScript Development</a></li><li><a href="http://perfectionkills.com/">Perfection Kills</a></li><li><a href="http://www.crockford.com">Douglas Crockford's Wrrrld Wide Web</a></li><li><a href="https://github.com/rmurphey/js-assessment">JS Assessment</a></li><li><a href="http://anton.kovalyov.net/slides/gothamjs/">Leveraging Code Quality Tools by Anton Kovalyov</a></li></ul><h3>编译和部署</h3><p>项目必须总是提供一些通用的方法来检验（can be linted）、测试和压缩源码以为产品阶段使用做准备。对于此类工作 Ben Alman 所写的 <a href="https://github.com/cowboy/grunt">grunt</a> 可谓首屈一指，并已替代这个仓库的 “kits/” 目录作官方工具。</p><h3>测试工具</h3><p>项目 <em>必须</em> 包括某此类型的单元、引用、实现或者功能性测试。使用代码示例并不足以称为“测试”。下面是一系列测试框架，他们只代表自己（谁都不是谁的更好替代品，which are endorsed more than the other）。</p><ul><li><a href="http://github.com/jquery/qunit">QUnit</a></li><li><a href="https://github.com/pivotal/jasmine">Jasmine</a></li><li><a href="https://github.com/cloudhead/vows">Vows</a></li><li><a href="https://github.com/visionmedia/mocha">Mocha</a></li><li><a href="http://hirojs.com/">Hiro</a></li><li><a href="https://code.google.com/p/js-test-driver/">JsTestDriver</a></li><li><a href="http://busterjs.org/">Buster.js</a></li><li><a href="http://sinonjs.org/">Sinon.js</a></li></ul><h2>目录</h2><ul><li><a href="#whitespace">Whitespace</a></li><li><a href="#spacing">Beautiful Syntax</a></li><li><a href="#type">Type Checking (Courtesy jQuery Core Style Guidelines)</a></li><li><a href="#cond">Conditional Evaluation</a></li><li><a href="#practical">Practical Style</a></li><li><a href="#naming">Naming</a></li><li><a href="#misc">Misc</a></li><li><a href="#native">Native &amp; Host Objects</a></li><li><a href="#comments">Comments</a></li><li><a href="#language">One Language Code</a></li></ul><hr><h2>前言</h2><p>下面的章节描述的是一个 <em>合理</em> 的现代 JavaScript 开发风格指南，并非硬性规定。其想送出的核心理念是_高度统一的代码风格_（the law of code style consistency）。你为项目所择风格都应为最高准则。作为一个描述放置于你的项目中，并链接到这个文档作为代码风格一致性、可读性和可维护性的保证。</p><h2>Idiomatic 风格宣言</h2><ol><li><p><a name="whitespace">空白</a></p><ul><li>永远都不要混用空格和Tab。</li><li>开始一个项目，在写代码之前，选择软缩进（空格）或者 Tab（作为缩进方式），并将其作为<strong>最高准则</strong>。<ul><li>为了可读, 我总是推荐在你的编辑中设计2个字母宽度的缩进 — 这等同于两个空格或者两个空格替代一个 Tab。</li></ul></li><li>如果你的编辑器支持，请总是打开 “显示不可见字符” 这个设置。好处是：<ul><li>保证一致性<ul><li>去掉行末的空格</li><li>去掉空行的空格</li><li>提交和对比更具可读性</li></ul></li></ul></li></ul></li><li><p><a name="spacing">美化语法</a></p><p><strong>A. 小括号, 花括号, 换行</strong></p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// if/else/for/while/try 通常都有小括号、花括号和多行</span>
    <span class="token comment">// 这有助于可读</span>

    <span class="token comment">// 2.A.1.1</span>
    <span class="token comment">// 难辨语法（cramped syntax）的例子</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>condition<span class="token punctuation">)</span> iterating<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">100</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token function">someIterativeFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.A.1.1</span>
    <span class="token comment">// 使用空格来提升可读性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 更好的做法:</span>
    <span class="token keyword">var</span> i<span class="token punctuation">,</span>
    length <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 或者...</span>
    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        length <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> prop<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>prop <span class="token keyword">in</span> object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>
</code></pre><p><strong>B. 赋值, 声明, 函数 ( 命名函数, 函数表达式, 构建函数 )</strong></p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 2.B.1.1</span>
    <span class="token comment">// 变量</span>
    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">"bar"</span><span class="token punctuation">,</span>
        num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        undef<span class="token punctuation">;</span>

    <span class="token comment">// 字面量标识:</span>
    <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        object <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.B.1.2</span>
    <span class="token comment">// 在一个作用域（函数）内只使用一个 `var` 有助于提升可读性</span>
    <span class="token comment">// 并且让你的声明列表变得有条不紊 (还帮你省了几次键盘敲击)</span>

    <span class="token comment">// 不好</span>
    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> qux<span class="token punctuation">;</span>

    <span class="token comment">// 好</span>
    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        bar <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        quux<span class="token punctuation">;</span>

    <span class="token comment">// 或者..</span>
    <span class="token keyword">var</span> <span class="token comment">// 对这些变量的注释</span>
    foo <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        bar <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
        quux<span class="token punctuation">;</span>

    <span class="token comment">// 2.B.1.3</span>
    <span class="token comment">// `var` 语句必须总是在各自作用域（函数）顶部</span>
    <span class="token comment">// 同样适应于来自 ECMAScript 6 的常量</span>

    <span class="token comment">// 不好</span>

    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token comment">// 在变量前有语句</span>

        <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
            qux<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 好</span>

    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
         qux<span class="token punctuation">;</span>

         <span class="token comment">// 所有语句都在变量之后</span>
    <span class="token punctuation">}</span>
</code></pre><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 2.B.2.1</span>
    <span class="token comment">// 命名函数声明</span>

    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">arg1<span class="token punctuation">,</span> argN</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// 使用方法</span>
    <span class="token function">foo</span><span class="token punctuation">(</span>arg1<span class="token punctuation">,</span> argN<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.B.2.2</span>
    <span class="token comment">// 命名函数声明</span>

    <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> number <span class="token operator">*</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 使用方法</span>
    <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 非常不自然的连带传参（continuation passing）风格</span>

    <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span>number <span class="token operator">*</span> number<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">square</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">square</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 回调内容</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.B.2.3</span>
    <span class="token comment">// 函数表达式</span>
    <span class="token keyword">var</span> <span class="token function-variable function">square</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 返回有价值的、相关的内容</span>
        <span class="token keyword">return</span> number <span class="token operator">*</span> number<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 带标识符的函数表达式</span>
    <span class="token comment">// 这种首选形式有附加的功能让其可以调用自身</span>
    <span class="token comment">// 并且在堆栈中有标识符</span>
    <span class="token keyword">var</span> <span class="token function-variable function">factorial</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>number <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> number <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>number <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.B.2.4</span>
    <span class="token comment">// 构造函数声明</span>

    <span class="token keyword">function</span> <span class="token function">FooBar</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> options<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 使用方法</span>
    <span class="token keyword">var</span> fooBar <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FooBar</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">"alpha"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    fooBar<span class="token punctuation">.</span>options<span class="token punctuation">;</span>
    <span class="token comment">// { a: "alpha" }</span>

</code></pre><p><strong>C. 异常, 细节</strong></p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 2.C.1.1</span>
    <span class="token comment">// 带回调的函数</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 注意：在第一函数调用的小括号和 `function` 处并没有空格</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 函数接受 `array` 作为参数，没有空格</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"alpha"</span><span class="token punctuation">,</span> <span class="token string">"beta"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 2.C.1.2</span>
    <span class="token comment">// 函数接受 `object` 作为参数，没有空格</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">"alpha"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">"beta"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 函数接受 `string` 字面量作为参数，没有空格</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">"bar"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 分组用的小括号内部，没有空格</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span><span class="token string">"foo"</span> <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
</code></pre><p><strong>D. 一致性（统一）总是笑到最后的（Consistency Always Wins）</strong></p><p>在 2.A-2.C 节，留白作为一个推荐方式被提出，基于单纯的、更高的目的：统一。值得注意的是格式化偏好，像“内部留白”必须是可选的，但在整个项目的源码中必须只存在着一种。</p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 2.D.1.1</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 语句</span>
    <span class="token punctuation">}</span></code></pre><p><strong>E. 引号</strong></p><p>无论你选择单引号还是双引号都无所谓，在 JavaScript 中它们在解析上没有区别。而<strong>绝对需要</strong>强制的是一致性。 <strong>永远不要在同一个项目中混用两种引号，选择一种，并保持一致</strong>。</p><p><strong>F. 行末和空行</strong></p><p>留白会破坏区别并使用变更不可读。考虑包括一个预提交的 hook 自动删除行末和空行中的空格。</p></li><li><p><a name="type">类型检测 (来源于 jQuery Core Style Guidelines)</a></p><p><strong>A. 直接类型（实际类型，Actual Types）</strong></p><p>String:</p><pre><code>typeof variable === &quot;string&quot;
</code></pre><p>Number:</p><pre><code>typeof variable === &quot;number&quot;
</code></pre><p>Boolean:</p><pre><code>typeof variable === &quot;boolean&quot;
</code></pre><p>Object:</p><pre><code>typeof variable === &quot;object&quot;
</code></pre><p>Array:</p><pre><code>Array.isArray( arrayLikeObject )
(如果可能的话)
</code></pre><p>Node:</p><pre><code>elem.nodeType === 1
</code></pre><p>null:</p><pre><code>variable === null
</code></pre><p>null or undefined:</p><pre><code>variable == null
</code></pre><p>undefined:</p><pre><code>全局变量:

typeof variable === &quot;undefined&quot;

局部变量:

variable === undefined

属性:

object.prop === undefined
object.hasOwnProperty( prop )
&quot;prop&quot; in object
</code></pre><p><strong>B. 转换类型（强制类型，Coerced Types）</strong></p><p>考虑下面这个的含义...</p><p>给定的 HTML:</p><pre class="language-html"><code class="language-html">
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>foo-input<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</code></pre><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 3.B.1.1</span>

    <span class="token comment">// `foo` 已经被赋予值 `0`，类型为 `number`</span>
    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token comment">// typeof foo;</span>
    <span class="token comment">// "number"</span>

    <span class="token comment">// 在后续的代码中，你需要更新 `foo`，赋予在 input 元素中得到的新值</span>

    foo <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"foo-input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>

    <span class="token comment">// 如果你现在测试 `typeof foo`, 结果将是 `string`</span>
    <span class="token comment">// 这意味着你在 if 语句检测 `foo` 有类似于此的逻辑:</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">importantTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// `importantTask()` 将永远不会被执行，即使 `foo` 有一个值 "1"</span>

    <span class="token comment">// 3.B.1.2</span>

    <span class="token comment">// 你可以巧妙地使用 + / - 一元运算符强制转换类型以解决问题:</span>

    foo <span class="token operator">=</span> <span class="token operator">+</span>document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"foo-input"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token comment">//  ^ + 一元运算符将它右边的运算对象转换为 `number`</span>

    <span class="token comment">// typeof foo;</span>
    <span class="token comment">// "number"</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">importantTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// `importantTask()` 将被调用</span>
</code></pre><p>对于强制类型转换这里有几个例子:</p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 3.B.2.1</span>

    <span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        string <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
        bool <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    number<span class="token punctuation">;</span>
    <span class="token comment">// 1</span>

    number <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token comment">// "1"</span>

    string<span class="token punctuation">;</span>
    <span class="token comment">// "1"</span>

    <span class="token operator">+</span>
    string<span class="token punctuation">;</span>
    <span class="token comment">// 1</span>

    <span class="token operator">+</span>
    string<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token comment">// 1</span>

    string<span class="token punctuation">;</span>
    <span class="token comment">// 2</span>

    bool<span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    <span class="token operator">+</span>bool<span class="token punctuation">;</span>
    <span class="token comment">// 0</span>

    bool <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token comment">// "false"</span>
</code></pre><pre class="language-javascript"><code class="language-javascript">    <span class="token comment">// 3.B.2.2</span>

    <span class="token keyword">var</span> number <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        string <span class="token operator">=</span> <span class="token string">"1"</span><span class="token punctuation">,</span>
        bool <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    string <span class="token operator">===</span> number<span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    string <span class="token operator">===</span> number <span class="token operator">+</span> <span class="token string">""</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    <span class="token operator">+</span>string <span class="token operator">===</span> number<span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    bool <span class="token operator">===</span> number<span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    <span class="token operator">+</span>bool <span class="token operator">===</span> number<span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    bool <span class="token operator">===</span> string<span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    bool <span class="token operator">===</span> <span class="token operator">!</span><span class="token operator">!</span>string<span class="token punctuation">;</span>
    <span class="token comment">// true</span></code></pre><pre class="language-javascript"><code class="language-javascript">    <span class="token comment">// 3.B.2.3</span>

    <span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string">"b"</span><span class="token punctuation">,</span> <span class="token string">"c"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">~</span>array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">~</span>array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"b"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">~</span>array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"c"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">~</span>array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    <span class="token comment">// 值得注意的是上述都是 "不必要的聪明"</span>
    <span class="token comment">// 采用明确的方案来比较返回的值</span>
    <span class="token comment">// 如 indexOf：</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span> <span class="token string">"a"</span> <span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span></code></pre><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 3.B.2.3</span>

    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">2.5</span><span class="token punctuation">;</span>
    <span class="token function">parseInt</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 等价于...</span>
    <span class="token operator">~</span><span class="token operator">~</span>num<span class="token punctuation">;</span>
    num <span class="token operator">>></span> <span class="token number">0</span><span class="token punctuation">;</span>
    num <span class="token operator">>>></span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 结果都是 2</span>
    <span class="token comment">// 时刻牢记心底, 负值将被区别对待...</span>
    <span class="token keyword">var</span> neg <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">2.5</span><span class="token punctuation">;</span>
    <span class="token function">parseInt</span><span class="token punctuation">(</span>neg<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 等价于...</span>
    <span class="token operator">~</span><span class="token operator">~</span>neg<span class="token punctuation">;</span>
    neg <span class="token operator">>></span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 结果都是 -2</span>
    <span class="token comment">// 但是...</span>
    neg <span class="token operator">>>></span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// 结果即是 4294967294</span>
</code></pre></li><li><p><a name="cond">对比运算</a></p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 4.1.1</span>
    <span class="token comment">// 当只是判断一个 array 是否有长度，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 4.1.2</span>
    <span class="token comment">// 当只是判断一个 array 是否为空，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> array<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>array<span class="token punctuation">.</span>length <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 4.1.3</span>
    <span class="token comment">// 当只是判断一个 string 是否为空，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> string <span class="token operator">!==</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> string <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 4.1.4</span>
    <span class="token comment">// 当只是判断一个 string 是为空，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> string <span class="token operator">===</span> <span class="token string">""</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断真伪, 请使用这种:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>string <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 4.1.5</span>
    <span class="token comment">// 当只是判断一个引用是为真，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foo <span class="token operator">===</span> <span class="token boolean">true</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...判断只需像你所想，享受内置功能的好处:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foo <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 4.1.6</span>
    <span class="token comment">// 当只是判断一个引用是为假，相对于使用这个:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foo <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...使用叹号将其转换为真</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>foo <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...需要注意的是：这个将会匹配 0, "", null, undefined, NaN</span>
    <span class="token comment">// 如果你 _必须_ 是布尔类型的 false，请这样用：</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foo <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 4.1.7</span>
    <span class="token comment">// 如果想计算一个引用可能是 null 或者 undefined，但并不是 false, "" 或者 0,</span>
    <span class="token comment">// 相对于使用这个：</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foo <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> foo <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// ...享受 == 类型强制转换的好处，像这样:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> foo <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token punctuation">)</span> <span class="token operator">...</span>

    <span class="token comment">// 谨记，使用 == 将会令 `null` 匹配 `null` 和 `undefined`</span>
    <span class="token comment">// 但不是 `false`，"" 或者 0</span>
    <span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span>
</code></pre><p>总是判断最好、最精确的值，上述是指南而非教条。</p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 4.2.1</span>
    <span class="token comment">// 类型转换和对比运算说明</span>

    <span class="token comment">// 首次 `===`，`==` 次之 (除非需要松散类型的对比)</span>

    <span class="token comment">// `===` 总不做类型转换，这意味着:</span>

    <span class="token string">"1"</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// false</span>

    <span class="token comment">// `==` 会转换类型，这意味着:</span>

    <span class="token string">"1"</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token comment">// true</span>

    <span class="token comment">// 4.2.2</span>
    <span class="token comment">// 布尔, 真 &amp; 伪</span>

    <span class="token comment">// 布尔:</span>
    <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span>

    <span class="token comment">// 真:</span>
    <span class="token string">"foo"</span><span class="token punctuation">,</span> <span class="token number">1</span>

    <span class="token comment">// 伪:</span>
    <span class="token string">""</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token keyword">void</span> <span class="token number">0</span>
</code></pre></li><li><p><a name="practical">实用风格</a></p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 5.1.1</span>
    <span class="token comment">// 一个实用的模块</span>

    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">global</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> Module <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token string">"secret"</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token comment">// 这是一个布尔值</span>
                <span class="token literal-property property">bool</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token comment">// 一个字符串</span>
                <span class="token literal-property property">string</span><span class="token operator">:</span> <span class="token string">"a string"</span><span class="token punctuation">,</span>
                <span class="token comment">// 一个数组</span>
                <span class="token literal-property property">array</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token comment">// 一个对象</span>
                <span class="token literal-property property">object</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">"en-Us"</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function-variable function">getData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 得到 `data` 的值</span>
                    <span class="token keyword">return</span> data<span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token function-variable function">setData</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token comment">// 返回赋值过的 `data` 的值</span>
                    <span class="token keyword">return</span> <span class="token punctuation">(</span>data <span class="token operator">=</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 其他一些将会出现在这里</span>
        <span class="token comment">// 把你的模块变成全局对象</span>
        global<span class="token punctuation">.</span>Module <span class="token operator">=</span> Module<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 5.2.1</span>
    <span class="token comment">// 一个实用的构建函数</span>

    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">global</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token function">Ctor</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> foo<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">Ctor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getFoo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>foo<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token class-name">Ctor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setFoo</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>foo <span class="token operator">=</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 不使用 `new` 来调用构建函数，你可能会这样做：</span>
        <span class="token keyword">var</span> <span class="token function-variable function">ctor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Ctor</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">// 把我们的构建函数变成全局对象</span>
        global<span class="token punctuation">.</span>ctor <span class="token operator">=</span> ctor<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></li><li><p><a name="naming">命名</a></p><p><strong>A. 你并不是一个人肉 编译器/压缩器，所以尝试去变身为其一。</strong></p><p>下面的代码是一个极糟命名的典范:</p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 6.A.1.1</span>
    <span class="token comment">// 糟糕命名的示例代码</span>

    <span class="token keyword">function</span> <span class="token function">q</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> i<span class="token punctuation">,</span>a<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>els<span class="token operator">=</span><span class="token function">q</span><span class="token punctuation">(</span><span class="token string">"#foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>els<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>els<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span></code></pre><p>毫无疑问，你写过这样的代码 —— 希望从今天它不再出现。</p><p>这里有一份相同逻辑的代码，但拥有更健壮、贴切的命名（和一个可读的结构）：</p><pre class="language-javascript"><code class="language-javascript">
<span class="token comment">// 6.A.2.1</span>
<span class="token comment">// 改善过命名的示例代码</span>

    <span class="token keyword">function</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token parameter">selector</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> idx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
        elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        matches <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string">"#foo"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        length <span class="token operator">=</span> matches<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span> idx <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> idx<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        elements<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>matches<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><p>一些额外的命名提示：</p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 6.A.3.1</span>
    <span class="token comment">// 命名字符串</span>

    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">dog</span><span class="token template-punctuation string">`</span></span> 是一个 string

    <span class="token comment">// 6.A.3.2</span>
    <span class="token comment">// 命名 arrays</span>

    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">['dogs']</span><span class="token template-punctuation string">`</span></span> 是一个包含 `dog 字符串的 array

    <span class="token comment">// 6.A.3.3</span>
    <span class="token comment">// 命名函数、对象、实例，等</span>

    camlCase<span class="token punctuation">;</span> <span class="token keyword">function</span> 和 <span class="token keyword">var</span> 声明

    <span class="token comment">// 6.A.3.4</span>
    <span class="token comment">// 命名构建器、原型，等</span>

    PascalCase<span class="token punctuation">;</span> 构建函数

    <span class="token comment">// 6.A.3.5</span>
    <span class="token comment">// 命名正则表达式</span>

    rDesc <span class="token operator">=</span> <span class="token comment">//;</span>

    <span class="token comment">// 6.A.3.6</span>
    <span class="token comment">// 来自 Google Closure Library Style Guide</span>

    functionNamesLikeThis<span class="token punctuation">;</span>
    variableNamesLikeThis<span class="token punctuation">;</span>
    ConstructorNamesLikeThis<span class="token punctuation">;</span>
    EnumNamesLikeThis<span class="token punctuation">;</span>
    methodNamesLikeThis<span class="token punctuation">;</span>
    <span class="token constant">SYMBOLIC_CONSTANTS_LIKE_THIS</span><span class="token punctuation">;</span>
</code></pre><p><strong>B. 面对 <code>this</code></strong></p><p>除使用众所周知的 <code>call</code> 和 <code>apply</code> 外，总是优先选择 <code>.bind( this )</code> 或者一个功能上等价于它的。创建 <code>BoundFunction</code> 声明供后续调用，当没有更好的选择时才使用别名。</p><pre class="language-javascript"><code class="language-javascript">    <span class="token comment">// 6.B.1</span>

    <span class="token keyword">function</span> <span class="token function">Device</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">// 新建一个异步的 stream，这个将被持续调用</span>
        stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>opts<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用 stream 返回 data 最新的值，更新实例的值</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 控制事件触发的频率</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 发出一个被控制的事件</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"event"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> opts<span class="token punctuation">.</span>freq <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 假设我们已继承了事件发送器（EventEmitter） ;)</span></code></pre><p>当不能运行时，等价于 <code>.bind</code> 的功能在多数现代 JavaScript 库中都有提供。</p><pre class="language-javascript"><code class="language-javascript">    <span class="token comment">// 6.B.2</span>

    <span class="token comment">// 示例：lodash/underscore，_.bind()</span>
    <span class="token keyword">function</span> <span class="token function">Device</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>opts<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token function">_</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token function">_</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"event"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> opts<span class="token punctuation">.</span>freq <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 示例：jQuery.proxy</span>

    <span class="token keyword">function</span> <span class="token function">Device</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>opts<span class="token punctuation">.</span>path<span class="token punctuation">,</span> jQuery<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token function">setInterval</span><span class="token punctuation">(</span>jQuery<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"event"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> opts<span class="token punctuation">.</span>freq <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 示例：dojo.hitch</span>
    <span class="token keyword">function</span> <span class="token function">Device</span><span class="token punctuation">(</span><span class="token parameter">opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>opts<span class="token punctuation">.</span>path<span class="token punctuation">,</span> dojo<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span>dojo<span class="token punctuation">.</span><span class="token function">hitch</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"event"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> opts<span class="token punctuation">.</span>freq <span class="token operator">||</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><p>提供一个候选，创建一个 <code>this</code> 的别名，以 <code>self</code> 作为标识符。这很有可能出 bug，应尽可能避免。</p><pre class="language-javascript"><code class="language-javascript">
<span class="token comment">// 6.B.3</span>

<span class="token keyword">function</span> <span class="token function">Device</span><span class="token punctuation">(</span> <span class="token parameter">opts</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    stream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span> opts<span class="token punctuation">.</span>path<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> <span class="token parameter">data</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>

    self<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    self<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">"event"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span><span class="token punctuation">,</span> opts<span class="token punctuation">.</span>freq <span class="token operator">||</span> <span class="token number">100</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p><strong>C. 使用 <code>thisArg</code></strong></p><p>好几个 ES 5.1 中的原型的方法都内置了一个特殊的 <code>thisArg</code> 标记，尽可能多地使用它</p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 6.C.1</span>

    <span class="token keyword">var</span> obj<span class="token punctuation">;</span>
    obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token string">"foo"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token string">"bar"</span><span class="token punctuation">,</span>
        <span class="token literal-property property">q</span><span class="token operator">:</span> <span class="token string">"qux"</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// |this| 现在是 `obj`</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;-- 最后的参数是 `thisArg`</span>
    <span class="token comment">// 打印出来...</span>
    <span class="token comment">// "foo"</span>
    <span class="token comment">// "bar"</span>
    <span class="token comment">// "qux"</span>
</code></pre><p><code>thisArg</code> 在 <code>Array.prototype.every</code>、 <code>Array.prototype.forEach</code>、 <code>Array.prototype.some</code>、 <code>Array.prototype.map</code>、 <code>Array.prototype.filter</code> 中都可以使用。</p></li><li><p><a name="misc">Misc</a></p><p>这个部分将要说明的想法和理念都并非教条。相反更鼓励对现存实践保持好奇，以尝试提供完成一般 JavaScript 编程任务的更好方案。</p><p><strong>A. 避免使用 <code>switch</code>，现代方法跟踪（method tracing）将会把带有 switch 表达式的函数列为黑名单。</strong></p><p>似乎在最新版本的 Firefox 和 Chrome 都对 <code>switch</code> 语句有重大改进。http://jsperf.com/switch-vs-object-literal-vs-module</p><p>值得注意的是，改进可以这里看到: https://github.com/rwldrn/idiomatic.js/issues/13</p><pre class="language-javascript"><code class="language-javascript">    <span class="token comment">// 7.A.1.1</span>
    <span class="token comment">// switch 语句示例</span>

    <span class="token keyword">switch</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string">"alpha"</span><span class="token operator">:</span>
            <span class="token function">alpha</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string">"beta"</span><span class="token operator">:</span>
            <span class="token function">beta</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token operator">:</span>
            <span class="token comment">// 默认分支</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 7.A.1.2</span>
    <span class="token comment">// 一个可支持组合、重用的方法是使用一个对象来存储 “cases”，</span>
    <span class="token comment">// 使用一个 function 来做委派：</span>

    <span class="token keyword">var</span> cases<span class="token punctuation">,</span> delegator<span class="token punctuation">;</span>

    <span class="token comment">// 返回值仅作说明用</span>
    cases <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">alpha</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 语句</span>
            <span class="token comment">// 一个返回值</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">"Alpha"</span><span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">beta</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 语句</span>
            <span class="token comment">// 一个返回值</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">"Beta"</span><span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">_default</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 语句</span>
            <span class="token comment">// 一个返回值</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">"Default"</span><span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function-variable function">delegator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> args<span class="token punctuation">,</span> key<span class="token punctuation">,</span> delegate<span class="token punctuation">;</span>

        <span class="token comment">// 把 `argument` 转换成数组</span>
        args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 从 `argument` 中抽出最前一个值</span>
        key <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 调用默认分支</span>
        delegate <span class="token operator">=</span> cases<span class="token punctuation">.</span>_default<span class="token punctuation">;</span>

        <span class="token comment">// 从对象中对方法进行委派操作</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cases<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            delegate <span class="token operator">=</span> cases<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// arg 的作用域可以设置成特定值，</span>
        <span class="token comment">// 这种情况下，|null| 就可以了</span>
        <span class="token keyword">return</span> <span class="token function">delegate</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// 7.A.1.3</span>
    <span class="token comment">// 使用 7.A.1.2 中的 API:</span>

    <span class="token function">delegator</span><span class="token punctuation">(</span><span class="token string">"alpha"</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// [ "Alpha", 5 ]</span>

    <span class="token comment">// 当然 `case` key 的值可以轻松地换成任意值</span>

    <span class="token keyword">var</span> caseKey<span class="token punctuation">,</span> someUserInput<span class="token punctuation">;</span>

    <span class="token comment">// 有没有可能是某种形式的输入?</span>
    someUserInput <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>someUserInput <span class="token operator">></span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        caseKey <span class="token operator">=</span> <span class="token string">"alpha"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        caseKey <span class="token operator">=</span> <span class="token string">"beta"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 或者...</span>

    caseKey <span class="token operator">=</span> someUserInput <span class="token operator">></span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">"alpha"</span> <span class="token operator">:</span> <span class="token string">"beta"</span><span class="token punctuation">;</span>

    <span class="token comment">// 然后...</span>

    <span class="token function">delegator</span><span class="token punctuation">(</span>caseKey<span class="token punctuation">,</span> someUserInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// [ "Beta", 1 ]</span>

    <span class="token comment">// 当然还可以这样搞...</span>

    <span class="token function">delegator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// [ "Default", 0 ]</span>
</code></pre><p><strong>B. 提前返回值提升代码的可读性并且没有太多性能上的差别</strong></p><pre class="language-javascript"><code class="language-javascript">
    <span class="token comment">// 7.B.1.1</span>
    <span class="token comment">// 不好:</span>

    <span class="token keyword">function</span> <span class="token function">returnLate</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> ret<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ret <span class="token operator">=</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            ret <span class="token operator">=</span> <span class="token string">"quux"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> ret<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 好:</span>

    <span class="token keyword">function</span> <span class="token function">returnEarly</span><span class="token punctuation">(</span><span class="token parameter">foo</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">"foo"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">"quux"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></li><li><p><a name="native">原生 &amp; 宿主对象（注：其实一直觉得 Host Objects 真不应该翻译过来，这是就按一般书的写法翻出来吧）</a></p><p>最基本的原则是:</p><p><strong>不要干任何蠢事，事情总会变好的</strong></p><p>为了加强这个观念，请观看这个演示:</p><p><strong>“一切都被允许: 原生扩展” by Andrew Dupont (JSConf2011, Portland, Oregon)</strong></p><iframe src="http://blip.tv/play/g_Mngr6LegI.html" width="480" height="346" frameborder="0" allowfullscreen></iframe><embed type="application/x-shockwave-flash" src="http://a.blip.tv/api.swf#g_Mngr6LegI" style="display:none"><p><a href="http://blip.tv/jsconf/jsconf2011-andrew-dupont-everything-is-permitted-extending-built-ins-5211542">http://blip.tv/jsconf/jsconf2011-andrew-dupont-everything-is-permitted-extending-built-ins-5211542</a></p></li><li><p><a name="comments">注释</a></p><ul><li>单行注释放于代码上方为首选</li><li>多行也可以</li><li>行末注释应被避免!</li><li>JSDoc 的方式也不错，但需要比较多的时间</li></ul></li><li><p><a name="language">单用一门语言</a></p><p>无论是什么语言程序维护者（或团队）规定使用何种语言，程序都应只用同一种语言书写。</p></li></ol><h2>附录</h2><h3>前置逗号（Comma First）</h3><p>所有使用这个文档作为基本风格指南的项目都不允许前置逗号的代码格式，除非明确指定或者作者要求。</p><p><strong>2013/5/10 23:18:10</strong></p></main></div><style>footer a{line-height:1}footer nav{display:flex;gap:1rem}</style><footer class="bg-ani"><nav><a target="_blank" href="https://github.com/gaubee/gaubee.com">Github</a> <a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/recordQuery">闽ICP备17026139号-1</a></nav></footer></body></html>