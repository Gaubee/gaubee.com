<!doctype html><html><head><meta charset="utf-8"><meta name="description" content=""><meta name="keywords" content="Appn, WebComponent, article"><meta name="author" content="Gaubee, gaubeebangeel@gmail.com"><meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=5"><title>textArea的placeholder不能换行的解决方案</title><link rel="shortcut icon" href="/assets/favicon-wB3RD3gX.ico"><link rel="stylesheet" href="/index.css">  <link rel="stylesheet" crossorigin href="/assets/prism-okaidia-D95GE6Gn.css">
<link rel="manifest" href="/manifest.webmanifest"><script id="vite-plugin-pwa:register-sw" src="/registerSW.js"></script></head><body><header class="bg-ani"><style>.nav{padding:0 2em;border-radius:2em;backdrop-filter:contrast(0.5) brightness(2);width:fit-content;max-width:100%}.nav{display:grid;grid-template-columns:repeat(auto-fit,180px);justify-content:center;gap:12px}.nav>a{display:block;flex:1;font-size:18px;padding:16px;text-align:center}.nav>a{color:#e91e63}@supports (-webkit-background-clip:text){.nav>a{background:-webkit-linear-gradient(#e91e63,#673ab7);color:transparent;-webkit-background-clip:text;-webkit-text-fill-color:transparent}}</style><nav class="nav"><a class="" href="/">Home</a> <a class="target" href="/articles/">Articles</a> <a class="" href="/events/">Events</a> <a class="" href="/timeline/">Timeline</a> <a class="" href="/projects/">Projects</a></nav></header><div id="main-wrapper" class="article-wrapper"><main><h1>textArea的placeholder不能换行的解决方案</h1><p><em>JS解决方案当然是最万能的。</em> 所以这里主要讲的是CSS解决方案，整理自鬼懿IT高级群的讨论 <em>10-11-2013</em>。 先上一段官方的说辞：</p><blockquote><p>The placeholder attribute represents a short hint (a word or short phrase) intended to aid the user with data entry. A hint could be a sample value or a brief description of the expected format. The attribute, if specified, must have a value that contains no U+000A LINE FEED (LF) or U+000D CARRIAGE RETURN (CR) characters.</p></blockquote><h2>1</h2><p>首先要知道的是HTML属性中的值会原封不动地输出到页面中，所以：</p><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>line1  \n lin2 &lt;br> line3 \A line4 
line5<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span></code></pre><p>是不会其任何作用的（这里line4和line5中的回车写法会被过滤掉，但是title属性就不会）。 所以就要借用到CSS。</p><h2>2</h2><p>先说webkit浏览器的解决方案： 首先要知道placeholder属性是可以用css来操作的，设置字体颜色、字体大小等等等。 （相关文章：<a href="http://davidwalsh.name/html5-placeholder-css">HTML5 Placeholder Styling with CSS</a>） 所以我们就可以用after伪类来实现把placeholder内容写到CSS中，这样就绕开了HTML属性的渲染方案：</p><pre class="language-css"><code class="language-css"><span class="token selector">textarea::-webkit-input-placeholder:after</span><span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"line@ \A line#"</span><span class="token punctuation">;</span><span class="token comment">/* 这里 \A 形成回车符号  */</span>
  <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><h2>3</h2><p>在兼容性写法中，不同浏览器的标示要分开来写，否则使解析器混淆CSS语义：</p><pre class="language-css"><code class="language-css"><span class="token comment">/* 错误写法 */</span>
<span class="token selector">input::-webkit-input-placeholder,
input:-moz-placeholder</span><span class="token punctuation">{</span>  <span class="token punctuation">}</span></code></pre><pre class="language-css"><code class="language-css"><span class="token comment">/* 正确写法 */</span>
<span class="token selector">input::-webkit-input-placeholder</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token selector">input:-moz-placeholder</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><h2>4</h2><p>然而群里面还对此提出一个观点，就是不应该在CSS中写应该在HTML中写的内容：</p><blockquote><p>多语言的应用，这样还得连css也加入翻译转换 (js)不太靠谱，css这东西顺序有关，你知道插哪儿啊</p><blockquote><p>240</p></blockquote></blockquote><p>总之，这种绕着弯子完成的解决方案本身就有缺陷，毕竟没有那么多空子给你转。</p><h2>5</h2><p>另外，通过 <strong>计算空格</strong> 来让placeholder自动换行也是个比较恶心的解决方案。但精力上绝对比较省，需要些一个计算空格的函数，耦合度也不会像上面CSS解决方案那么高。</p><h2>6</h2><p>最后还有一个值得一提的就是下面这种无法生效的写法：</p><pre class="language-html"><code class="language-html"><span class="token comment">&lt;!-- placeholder属性必须存在且非空 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span>  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span> <span class="token punctuation">"</span></span> <span class="token attr-name">data-placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>\A  line2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span></code></pre><pre class="language-css"><code class="language-css"><span class="token selector">textarea::-webkit-input-placeholder:after</span><span class="token punctuation">{</span>
  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"line1"</span> <span class="token function">attr</span><span class="token punctuation">(</span>data-placeholder<span class="token punctuation">)</span> <span class="token string">"\A  line3"</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>这里无法获取到data-placeholder属性的值，因为双伪类导致<code>:after</code>的对象不是textarea，而是<code>placeholder</code>（shadow DOM）。</p><p>最后给出stackoverflow上<a href="http://stackoverflow.com/questions/7189223/can-you-have-multiline-html5-placeholder-text-in-a-textarea">相关的问题及其解答</a>，涉及到更多详细的内容，值得一读。</p></main></div><style>footer a{line-height:1}footer nav{display:flex;gap:1rem}</style><footer class="bg-ani"><nav><a target="_blank" href="https://github.com/gaubee/gaubee.com">Github</a> <a target="_blank" href="https://beian.miit.gov.cn/#/Integrated/recordQuery">闽ICP备17026139号-1</a></nav></footer></body></html>