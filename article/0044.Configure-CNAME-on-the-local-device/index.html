<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/assets/static/renderer_css_index-e8e12f67.-4-S6IZd.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/renderer_Layout-031b266d.CEjdw0pU.css">
        <meta charset="UTF-8" />
        <link rel="icon" href="/img/head.webp" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Gaubee&#039;s Blogs / Events / Projects" />
        <title>Gaubee&#039;s Site</title>
      </head>
      <body>
        <div id="root"><link rel="preload" as="image" href="/img/head.webp"/><div style="display:flex;max-width:900px;margin:auto"><div style="display:flex;flex-direction:column;justify-content:space-between;max-height:100vh;width:38%;max-width:26em;position:sticky;top:0"><div id="sidebar" style="padding:20px;flex-shrink:0;display:flex;flex-direction:column;line-height:1.8em;border-right:2px solid #eee"><div style="margin-top:20px;margin-bottom:10px"><a href="/"><img src="/img/head.webp" height="64" width="64" alt="logo"/></a></div><a href="/" class="">Timeline</a><a href="/projects" class="">Projects</a><a href="/about" class="">About</a></div><div style="padding:16px"><small>本网站不收集任何访问者的行为与信息，不做任何商业运作，仅仅为个人使用。</small><small style="display:block;margin-top:8px"><a href="https://beian.miit.gov.cn/#/Integrated/recordQuery">闽ICP备17026139号-1</a></small></div></div><div id="page-container"><div id="page-content" style="padding:20px;padding-bottom:50px;min-height:100vh;background-color:#fafafa;color:#333"><style type="text/css">
          main > p {
            text-indent: 1em;
          }

          main > p > img {
            max-width: 100%;
            margin: 0 auto;
            display: block;
          }
        </style><h1>在本机配置 CNAME</h1><main><ol>
<li>
<p>安装 dnsmasq</p>
<pre><code class="language-bash">sudo apt-get install dnsmasq
</code></pre>
</li>
<li>
<p>配置 dnsmasq</p>
<pre><code class="language-bash">vi /etc/dnsmasq.d/test.conf # 随便开一个文件
</code></pre>
<blockquote>
<p>填入：</p>
</blockquote>
<pre><code class="language-ini">cname=from.gaubee.com,to.gaubee.com
</code></pre>
</li>
<li>
<p>修改本地 dns 配置：</p>
<pre><code class="language-bash">vi /etc/resolv.conf
# 添加一行 nameserver 127.0.0.1
</code></pre>
<blockquote>
<p>最终我自己本地这个文件是这样的</p>
</blockquote>
<pre><code class="language-ini"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:
# [network]
# generateResolvConf = false
nameserver 127.0.0.1
nameserver 172.19.208.1
</code></pre>
</li>
<li>
<p>最后启动 dnsmasq 即可：</p>
<pre><code class="language-bash">/etc/init.d/dnsmasq start
</code></pre>
<blockquote>
<p>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序</p>
</blockquote>
<pre><code class="language-bash">sudo lsof -i -P -n | grep LISTEN
</code></pre>
</li>
</ol></main></div></div></div></div>
        <script id="vike_pageContext" type="application/json">{"abortReason":"!undefined","_urlRewrite":null,"_urlRedirect":"!undefined","abortStatusCode":"!undefined","_abortCall":"!undefined","_pageContextInitIsPassedToClient":"!undefined","pageId":"/pages/article/@id","routeParams":{"id":"0044.Configure-CNAME-on-the-local-device"},"data":{"article":{"fileEntry":{"path":"/home/runner/work/gaubee.com/gaubee.com/articles/0044.Configure-CNAME-on-the-local-device.md","options":{"cwd":"/home/runner/work/gaubee.com/gaubee.com/articles"},"isFile":true,"isDirectory":false},"originMetadata":{"layout":"layouts/article.njk","title":"在本机配置 CNAME","date":"!Date:2022-10-10T08:19:46.754Z","updated":"!Date:2022-10-10T08:19:46.754Z","tags":["linux","dns"]},"metadata":{"layout":"layouts/article.njk","title":"在本机配置 CNAME","date":"!Date:2022-10-10T08:19:46.754Z","updated":"!Date:2022-10-10T08:19:46.754Z","tags":["linux","dns"],"id":"0044.Configure-CNAME-on-the-local-device","createdAt":"!Date:2022-10-10T08:19:46.754Z","updatedAt":"!Date:2022-10-10T08:19:46.754Z"},"htmlContent":"\u003col>\n\u003cli>\n\u003cp>安装 dnsmasq\u003c/p>\n\u003cpre>\u003ccode class=\"language-bash\">sudo apt-get install dnsmasq\n\u003c/code>\u003c/pre>\n\u003c/li>\n\u003cli>\n\u003cp>配置 dnsmasq\u003c/p>\n\u003cpre>\u003ccode class=\"language-bash\">vi /etc/dnsmasq.d/test.conf # 随便开一个文件\n\u003c/code>\u003c/pre>\n\u003cblockquote>\n\u003cp>填入：\u003c/p>\n\u003c/blockquote>\n\u003cpre>\u003ccode class=\"language-ini\">cname=from.gaubee.com,to.gaubee.com\n\u003c/code>\u003c/pre>\n\u003c/li>\n\u003cli>\n\u003cp>修改本地 dns 配置：\u003c/p>\n\u003cpre>\u003ccode class=\"language-bash\">vi /etc/resolv.conf\n# 添加一行 nameserver 127.0.0.1\n\u003c/code>\u003c/pre>\n\u003cblockquote>\n\u003cp>最终我自己本地这个文件是这样的\u003c/p>\n\u003c/blockquote>\n\u003cpre>\u003ccode class=\"language-ini\"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:\n# [network]\n# generateResolvConf = false\nnameserver 127.0.0.1\nnameserver 172.19.208.1\n\u003c/code>\u003c/pre>\n\u003c/li>\n\u003cli>\n\u003cp>最后启动 dnsmasq 即可：\u003c/p>\n\u003cpre>\u003ccode class=\"language-bash\">/etc/init.d/dnsmasq start\n\u003c/code>\u003c/pre>\n\u003cblockquote>\n\u003cp>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序\u003c/p>\n\u003c/blockquote>\n\u003cpre>\u003ccode class=\"language-bash\">sudo lsof -i -P -n | grep LISTEN\n\u003c/code>\u003c/pre>\n\u003c/li>\n\u003c/ol>","markdownContent":"\n1. 安装 dnsmasq\n\n   ```bash\n   sudo apt-get install dnsmasq\n   ```\n\n1. 配置 dnsmasq\n\n   ```bash\n   vi /etc/dnsmasq.d/test.conf # 随便开一个文件\n   ```\n\n   > 填入：\n\n   ```ini\n   cname=from.gaubee.com,to.gaubee.com\n   ```\n\n1. 修改本地 dns 配置：\n\n   ```bash\n   vi /etc/resolv.conf\n   # 添加一行 nameserver 127.0.0.1\n   ```\n\n   > 最终我自己本地这个文件是这样的\n\n   ```ini\n   # This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:\n   # [network]\n   # generateResolvConf = false\n   nameserver 127.0.0.1\n   nameserver 172.19.208.1\n   ```\n\n1. 最后启动 dnsmasq 即可：\n\n   ```bash\n   /etc/init.d/dnsmasq start\n   ```\n\n   > 它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序\n\n   ```bash\n   sudo lsof -i -P -n | grep LISTEN\n   ```\n"}}}</script>
        <script src="/assets/entries/entry-client-routing.Drxmn1Vl.js" type="module" async></script>
        <link rel="modulepreload" href="/assets/entries/pages_article_-id.Dy4hh5dO.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-BaTxRAW4.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-CZaZKh6Z.js" as="script" type="text/javascript">
      </body>
    </html>