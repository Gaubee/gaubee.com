{"abortReason":"!undefined","_urlRewrite":null,"_urlRedirect":"!undefined","abortStatusCode":"!undefined","_abortCall":"!undefined","_pageContextInitIsPassedToClient":"!undefined","pageId":"/pages/article/@id","routeParams":{"id":"Configure-CNAME-on-the-local-device"},"data":{"article":{"metadata":{"layout":"layouts/article.njk","title":"在本机配置 CNAME","date":"!Date:2022-10-10T08:19:46.754Z","updated":"!Date:2022-10-10T08:19:46.754Z","tags":["linux","dns"],"id":"Configure-CNAME-on-the-local-device","createdAt":"!Date:2022-10-10T08:19:46.754Z","updatedAt":"!Date:2022-10-10T08:19:46.754Z"},"htmlContent":"<ol>\n<li>\n<p>安装 dnsmasq</p>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">sudo</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> apt-get</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> install</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> dnsmasq</span></span></code></pre>\n</li>\n<li>\n<p>配置 dnsmasq</p>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">vi</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /etc/dnsmasq.d/test.conf</span><span style=\"color:#6A737D;--shiki-dark:#6A737D\"> # 随便开一个文件</span></span></code></pre>\n<blockquote>\n<p>填入：</p>\n</blockquote>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-ini\"><span class=\"line\"><span style=\"color:#D73A49;--shiki-dark:#F97583\">cname</span><span style=\"color:#24292E;--shiki-dark:#E1E4E8\">=from.gaubee.com,to.gaubee.com</span></span></code></pre>\n</li>\n<li>\n<p>修改本地 dns 配置：</p>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">vi</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /etc/resolv.conf</span></span>\n<span class=\"line\"><span style=\"color:#6A737D;--shiki-dark:#6A737D\"># 添加一行 nameserver 127.0.0.1</span></span></code></pre>\n<blockquote>\n<p>最终我自己本地这个文件是这样的</p>\n</blockquote>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-ini\"><span class=\"line\"><span style=\"color:#6A737D;--shiki-dark:#6A737D\"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span></span>\n<span class=\"line\"><span style=\"color:#6A737D;--shiki-dark:#6A737D\"># [network]</span></span>\n<span class=\"line\"><span style=\"color:#6A737D;--shiki-dark:#6A737D\"># generateResolvConf = false</span></span>\n<span class=\"line\"><span style=\"color:#24292E;--shiki-dark:#E1E4E8\">nameserver 127.0.0.1</span></span>\n<span class=\"line\"><span style=\"color:#24292E;--shiki-dark:#E1E4E8\">nameserver 172.19.208.1</span></span></code></pre>\n</li>\n<li>\n<p>最后启动 dnsmasq 即可：</p>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">/etc/init.d/dnsmasq</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> start</span></span></code></pre>\n<blockquote>\n<p>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序</p>\n</blockquote>\n<pre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\"><code class=\"language-bash\"><span class=\"line\"><span style=\"color:#6F42C1;--shiki-dark:#B392F0\">sudo</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> lsof</span><span style=\"color:#005CC5;--shiki-dark:#79B8FF\"> -i</span><span style=\"color:#005CC5;--shiki-dark:#79B8FF\"> -P</span><span style=\"color:#005CC5;--shiki-dark:#79B8FF\"> -n</span><span style=\"color:#D73A49;--shiki-dark:#F97583\"> |</span><span style=\"color:#6F42C1;--shiki-dark:#B392F0\"> grep</span><span style=\"color:#032F62;--shiki-dark:#9ECBFF\"> LISTEN</span></span></code></pre>\n</li>\n</ol>\n","markdownContent":"\n1. 安装 dnsmasq\n\n   ```bash\n   sudo apt-get install dnsmasq\n   ```\n\n1. 配置 dnsmasq\n\n   ```bash\n   vi /etc/dnsmasq.d/test.conf # 随便开一个文件\n   ```\n\n   > 填入：\n\n   ```ini\n   cname=from.gaubee.com,to.gaubee.com\n   ```\n\n1. 修改本地 dns 配置：\n\n   ```bash\n   vi /etc/resolv.conf\n   # 添加一行 nameserver 127.0.0.1\n   ```\n\n   > 最终我自己本地这个文件是这样的\n\n   ```ini\n   # This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:\n   # [network]\n   # generateResolvConf = false\n   nameserver 127.0.0.1\n   nameserver 172.19.208.1\n   ```\n\n1. 最后启动 dnsmasq 即可：\n\n   ```bash\n   /etc/init.d/dnsmasq start\n   ```\n\n   > 它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序\n\n   ```bash\n   sudo lsof -i -P -n | grep LISTEN\n   ```\n"}}}