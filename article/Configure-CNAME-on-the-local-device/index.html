<!DOCTYPE html>
    <html lang="en">
      <head>
        <link rel="stylesheet" type="text/css" href="/assets/static/renderer_css_index-e8e12f67.CaHEwVA7.css">
        <link rel="stylesheet" type="text/css" href="/assets/static/renderer_Layout-031b266d.CEjdw0pU.css">
        <meta charset="UTF-8" />
        <link rel="icon" href="/img/head.webp" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="Demo of using Vike" />
        <title>Vike Demo</title>
      </head>
      <body>
        <div id="root"><link rel="preload" as="image" href="img/head.webp"/><div style="display:flex;max-width:900px;margin:auto"><div id="sidebar" style="padding:20px;flex-shrink:0;display:flex;flex-direction:column;line-height:1.8em;border-right:2px solid #eee"><div style="margin-top:20px;margin-bottom:10px"><a href="/"><img src="img/head.webp" height="64" width="64" alt="logo"/></a></div><a href="/" class="">Timeline</a><a href="/projects" class="">Projects</a><a href="/about" class="">About</a></div><div id="page-container"><div id="page-content" style="padding:20px;padding-bottom:50px;min-height:100vh"><h1>在本机配置 CNAME</h1><main><ol>
<li>
<p>安装 dnsmasq</p>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> apt-get</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> install</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> dnsmasq</span></span></code></pre>
</li>
<li>
<p>配置 dnsmasq</p>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">vi</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> /etc/dnsmasq.d/test.conf</span><span style="color:#6A737D;--shiki-dark:#6A737D"> # 随便开一个文件</span></span></code></pre>
<blockquote>
<p>填入：</p>
</blockquote>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-ini"><span class="line"><span style="color:#D73A49;--shiki-dark:#F97583">cname</span><span style="color:#24292E;--shiki-dark:#E1E4E8">=from.gaubee.com,to.gaubee.com</span></span></code></pre>
</li>
<li>
<p>修改本地 dns 配置：</p>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">vi</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> /etc/resolv.conf</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D"># 添加一行 nameserver 127.0.0.1</span></span></code></pre>
<blockquote>
<p>最终我自己本地这个文件是这样的</p>
</blockquote>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-ini"><span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D"># [network]</span></span>
<span class="line"><span style="color:#6A737D;--shiki-dark:#6A737D"># generateResolvConf = false</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">nameserver 127.0.0.1</span></span>
<span class="line"><span style="color:#24292E;--shiki-dark:#E1E4E8">nameserver 172.19.208.1</span></span></code></pre>
</li>
<li>
<p>最后启动 dnsmasq 即可：</p>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">/etc/init.d/dnsmasq</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> start</span></span></code></pre>
<blockquote>
<p>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序</p>
</blockquote>
<pre class="shiki shiki-themes github-light github-dark" style="background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8" tabindex="0"><code class="language-bash"><span class="line"><span style="color:#6F42C1;--shiki-dark:#B392F0">sudo</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> lsof</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> -i</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> -P</span><span style="color:#005CC5;--shiki-dark:#79B8FF"> -n</span><span style="color:#D73A49;--shiki-dark:#F97583"> |</span><span style="color:#6F42C1;--shiki-dark:#B392F0"> grep</span><span style="color:#032F62;--shiki-dark:#9ECBFF"> LISTEN</span></span></code></pre>
</li>
</ol>
</main></div></div></div></div>
        <script id="vike_pageContext" type="application/json">{"abortReason":"!undefined","_urlRewrite":null,"_urlRedirect":"!undefined","abortStatusCode":"!undefined","_abortCall":"!undefined","_pageContextInitIsPassedToClient":"!undefined","pageId":"/pages/article/@id","routeParams":{"id":"Configure-CNAME-on-the-local-device"},"data":{"article":{"metadata":{"layout":"layouts/article.njk","title":"在本机配置 CNAME","date":"!Date:2022-10-10T08:19:46.754Z","updated":"!Date:2022-10-10T08:19:46.754Z","tags":["linux","dns"],"id":"Configure-CNAME-on-the-local-device","createdAt":"!Date:2022-10-10T08:19:46.754Z","updatedAt":"!Date:2022-10-10T08:19:46.754Z"},"htmlContent":"\u003col>\n\u003cli>\n\u003cp>安装 dnsmasq\u003c/p>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-bash\">\u003cspan class=\"line\">\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">sudo\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> apt-get\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> install\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> dnsmasq\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003c/li>\n\u003cli>\n\u003cp>配置 dnsmasq\u003c/p>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-bash\">\u003cspan class=\"line\">\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">vi\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /etc/dnsmasq.d/test.conf\u003c/span>\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"> # 随便开一个文件\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003cblockquote>\n\u003cp>填入：\u003c/p>\n\u003c/blockquote>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-ini\">\u003cspan class=\"line\">\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\">cname\u003c/span>\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">=from.gaubee.com,to.gaubee.com\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003c/li>\n\u003cli>\n\u003cp>修改本地 dns 配置：\u003c/p>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-bash\">\u003cspan class=\"line\">\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">vi\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> /etc/resolv.conf\u003c/span>\u003c/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"># 添加一行 nameserver 127.0.0.1\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003cblockquote>\n\u003cp>最终我自己本地这个文件是这样的\u003c/p>\n\u003c/blockquote>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-ini\">\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"># This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:\u003c/span>\u003c/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"># [network]\u003c/span>\u003c/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#6A737D;--shiki-dark:#6A737D\"># generateResolvConf = false\u003c/span>\u003c/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">nameserver 127.0.0.1\u003c/span>\u003c/span>\n\u003cspan class=\"line\">\u003cspan style=\"color:#24292E;--shiki-dark:#E1E4E8\">nameserver 172.19.208.1\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003c/li>\n\u003cli>\n\u003cp>最后启动 dnsmasq 即可：\u003c/p>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-bash\">\u003cspan class=\"line\">\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">/etc/init.d/dnsmasq\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> start\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003cblockquote>\n\u003cp>它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序\u003c/p>\n\u003c/blockquote>\n\u003cpre class=\"shiki shiki-themes github-light github-dark\" style=\"background-color:#fff;--shiki-dark-bg:#24292e;color:#24292e;--shiki-dark:#e1e4e8\" tabindex=\"0\">\u003ccode class=\"language-bash\">\u003cspan class=\"line\">\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\">sudo\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> lsof\u003c/span>\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> -i\u003c/span>\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> -P\u003c/span>\u003cspan style=\"color:#005CC5;--shiki-dark:#79B8FF\"> -n\u003c/span>\u003cspan style=\"color:#D73A49;--shiki-dark:#F97583\"> |\u003c/span>\u003cspan style=\"color:#6F42C1;--shiki-dark:#B392F0\"> grep\u003c/span>\u003cspan style=\"color:#032F62;--shiki-dark:#9ECBFF\"> LISTEN\u003c/span>\u003c/span>\u003c/code>\u003c/pre>\n\u003c/li>\n\u003c/ol>\n","markdownContent":"\n1. 安装 dnsmasq\n\n   ```bash\n   sudo apt-get install dnsmasq\n   ```\n\n1. 配置 dnsmasq\n\n   ```bash\n   vi /etc/dnsmasq.d/test.conf # 随便开一个文件\n   ```\n\n   > 填入：\n\n   ```ini\n   cname=from.gaubee.com,to.gaubee.com\n   ```\n\n1. 修改本地 dns 配置：\n\n   ```bash\n   vi /etc/resolv.conf\n   # 添加一行 nameserver 127.0.0.1\n   ```\n\n   > 最终我自己本地这个文件是这样的\n\n   ```ini\n   # This file was automatically generated by WSL. To stop automatic generation of this file, add the following entry to /etc/wsl.conf:\n   # [network]\n   # generateResolvConf = false\n   nameserver 127.0.0.1\n   nameserver 172.19.208.1\n   ```\n\n1. 最后启动 dnsmasq 即可：\n\n   ```bash\n   /etc/init.d/dnsmasq start\n   ```\n\n   > 它会监听本地 53 断开（DNS 服务的端口），如果报端口占用。那么查看一下占用程序\n\n   ```bash\n   sudo lsof -i -P -n | grep LISTEN\n   ```\n"}}}</script>
        <script src="/assets/entries/entry-client-routing.CCKOlsvO.js" type="module" async></script>
        <link rel="modulepreload" href="/assets/entries/pages_article_-id.B90W03kN.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-DwSuT-WT.js" as="script" type="text/javascript">
        <link rel="modulepreload" href="/assets/chunks/chunk-DdC9uZfL.js" as="script" type="text/javascript">
      </body>
    </html>